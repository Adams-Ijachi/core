(self.webpackChunk_flarum_core=self.webpackChunk_flarum_core||[]).push([[28],{6392:(t,e,s)=>{s.a(t,(async t=>{s.d(e,{Z:()=>h});var o=s(1788),n=s(1650),i=s(6167),r=s(684),a=s(4594),l=s(7473),d=s(2587),u=s(9806),c=(await s.e(192).then(s.bind(s,5776))).default,p=await s.e(779).then(s.bind(s,6848)),h=function(t){function e(){return t.apply(this,arguments)||this}(0,o.Z)(e,t);var c=e.prototype;return c.oninit=function(e){var s=this;t.prototype.oninit.call(this,e),this.revealContent=!1,this.cardVisible=!1,this.subtree.check((function(){return s.cardVisible}),(function(){return s.isEditing()}),(function(){return s.revealContent}))},c.content=function(){return t.prototype.content.call(this).concat([m("header",{className:"Post-header"},m("ul",null,(0,l.Z)(this.headerItems().toArray()))),m("div",{className:"Post-body"},this.isEditing()?m(u.Z,{className:"Post-preview",composer:app.composer}):m.trust(this.attrs.post.contentHtml()))])},c.refreshContent=function(){var t=this.isEditing()?"":this.attrs.post.contentHtml();this.contentHtml!==t&&this.$(".Post-body script").each((function(){var t=document.createElement("script");t.textContent=this.textContent,Array.from(this.attributes).forEach((function(e){return t.setAttribute(e.name,e.value)})),this.parentNode.replaceChild(t,this)})),this.contentHtml=t},c.oncreate=function(e){t.prototype.oncreate.call(this,e),this.refreshContent()},c.onupdate=function(e){t.prototype.onupdate.call(this,e),this.refreshContent()},c.isEditing=function(){var t=this;s.e(293).then(s.bind(s,763)).then((function(e){return app.composer.bodyMatches(e.default,{post:t.attrs.post})}))},c.elementAttrs=function(){var e=this.attrs.post,s=t.prototype.elementAttrs.call(this);return s.className=(s.className||"")+" "+(0,n.Z)({CommentPost:!0,"Post--hidden":e.isHidden(),"Post--edited":e.isEdited(),revealContent:this.revealContent,editing:this.isEditing()}),s},c.toggleContent=function(){this.revealContent=!this.revealContent},c.headerItems=function(){var t=this,e=new a.Z,s=this.attrs.post;return e.add("user",p.default.component({post:s,cardVisible:this.cardVisible,oncardshow:function(){t.cardVisible=!0,m.redraw()},oncardhide:function(){t.cardVisible=!1,m.redraw()}}),100),e.add("meta",i.Z.component({post:s})),s.isEdited()&&!s.isHidden()&&e.add("edited",r.Z.component({post:s})),s.isHidden()&&e.add("toggle",d.Z.component({className:"Button Button--default Button--more",icon:"fas fa-ellipsis-h",onclick:this.toggleContent.bind(this)})),e},e}(c);window.flreg.add("components/CommentPost",h),t()}),1)},9806:(t,e,s)=>{s.d(e,{Z:()=>n});var o=s(1788),n=function(t){function e(){return t.apply(this,arguments)||this}(0,o.Z)(e,t),e.initAttrs=function(t){t.className=t.className||"",t.surround=t.surround||function(t){return t()}};var s=e.prototype;return s.view=function(){return m("div",{className:this.attrs.className})},s.oncreate=function(e){var s,o=this;t.prototype.oncreate.call(this,e);var n=function(){if(o.attrs.composer.isVisible()){var t=o.attrs.composer.fields.content();s!==t&&(s=t,o.attrs.surround((function(){return s9e.TextFormatter.preview(s||"",e.dom)})))}};n(),this.updateInterval=setInterval(n,50)},s.onremove=function(){clearInterval(this.updateInterval)},e}(s(8931).Z);window.flreg.add("components/ComposerPostPreview",n)},684:(t,e,s)=>{s.d(e,{Z:()=>a});var o=s(1788),n=s(8931),i=s(9052),r=s(5731),a=function(t){function e(){return t.apply(this,arguments)||this}(0,o.Z)(e,t);var s=e.prototype;return s.oninit=function(e){t.prototype.oninit.call(this,e),this.shouldUpdateTooltip=!1,this.oldEditedInfo=null},s.view=function(){var t=this.attrs.post,e=t.editedUser(),s=(0,r.Z)(app.translator.trans("core.forum.post.edited_tooltip",{user:e,ago:(0,i.Z)(t.editedAt())}));return s!==this.oldEditedInfo&&(this.shouldUpdateTooltip=!0,this.oldEditedInfo=s),m("span",{className:"PostEdited",title:s},app.translator.trans("core.forum.post.edited_text"))},s.oncreate=function(e){t.prototype.oncreate.call(this,e),this.rebuildTooltip()},s.onupdate=function(){this.rebuildTooltip()},s.rebuildTooltip=function(){this.shouldUpdateTooltip&&(this.$().tooltip("destroy").tooltip(),this.shouldUpdateTooltip=!1)},e}(n.Z);window.flreg.add("components/PostEdited",a)},6167:(t,e,s)=>{s.d(e,{Z:()=>a});var o=s(1788),n=s(8931),i=s(6961),r=s(8966),a=function(t){function e(){return t.apply(this,arguments)||this}(0,o.Z)(e,t);var s=e.prototype;return s.view=function(){var t=this.attrs.post,e=t.createdAt(),s=this.getPermalink(t),o="ontouchstart"in document.documentElement;return m("div",{className:"Dropdown PostMeta"},m("a",{className:"Dropdown-toggle",onclick:function(t){var e=this;setTimeout((function(){return $(e).parent().find(".PostMeta-permalink").select()})),t.redraw=!1},"data-toggle":"dropdown"},(0,i.Z)(e)),m("div",{className:"Dropdown-menu dropdown-menu"},m("span",{className:"PostMeta-number"},app.translator.trans("core.forum.post.number_tooltip",{number:t.number()}))," ",m("span",{className:"PostMeta-time"},(0,r.Z)(e))," ",m("span",{className:"PostMeta-ip"},t.data.attributes.ipAddress),o?m("a",{className:"Button PostMeta-permalink",href:s},s):m("input",{className:"FormControl PostMeta-permalink",value:s,onclick:function(t){return t.stopPropagation()}})))},s.getPermalink=function(t){return window.location.origin+app.route.post(t)},e}(n.Z);window.flreg.add("components/PostMeta",a)},2352:(t,e,s)=>{s.a(t,(async t=>{s.r(e),s.d(e,{default:()=>u});var o=s(1788),n=s(8726),i=s(2587),r=s(8046),a=s(4612),l=s(6392),d=t([l]);l=(d.then?await d:d)[0];var u=function(t){function e(){return t.apply(this,arguments)||this}(0,o.Z)(e,t);var s=e.prototype;return s.oninit=function(e){t.prototype.oninit.call(this,e),this.loading=!0,this.moreResults=!1,this.posts=[],this.loadLimit=20,this.loadUser(m.route.param("username"))},s.content=function(){return 0!==this.posts.length||this.loading?(this.loading?t=m(n.Z,null):this.moreResults&&(t=m("div",{className:"PostsUserPage-loadMore"},m(i.Z,{className:"Button",onclick:this.loadMore.bind(this)},app.translator.trans("core.forum.user.posts_load_more_button")))),m("div",{className:"PostsUserPage"},m("ul",{className:"PostsUserPage-list"},this.posts.map((function(t){return m("li",null,m("div",{className:"PostsUserPage-discussion"},app.translator.trans("core.forum.user.in_discussion_text",{discussion:m(r.Z,{href:app.route.post(t)},t.discussion().title())})),m(l.Z,{post:t}))}))),m("div",{className:"PostsUserPage-loadMore"},t))):m("div",{className:"PostsUserPage"},m(a.Z,{text:app.translator.trans("core.forum.user.posts_empty_text")}));var t},s.show=function(e){t.prototype.show.call(this,e),this.refresh()},s.refresh=function(){this.loading=!0,this.posts=[],m.redraw(),this.loadResults().then(this.parseResults.bind(this))},s.loadResults=function(t){return app.store.find("posts",{filter:{author:this.user.username(),type:"comment"},page:{offset:t,limit:this.loadLimit},sort:"-createdAt"})},s.loadMore=function(){this.loading=!0,this.loadResults(this.posts.length).then(this.parseResults.bind(this))},s.parseResults=function(t){return this.loading=!1,[].push.apply(this.posts,t),this.moreResults=t.length>=this.loadLimit,m.redraw(),t},e}((await s.e(251).then(s.bind(s,6068))).default);window.flreg.add("components/PostsUserPage",u),t()}),1)}}]);
//# sourceMappingURL=PostsUserPage.js.map