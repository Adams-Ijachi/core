(self.webpackChunkflarum_core=self.webpackChunkflarum_core||[]).push([[703],{5552:(t,n,e)=>{"use strict";e.r(n),e.d(n,{Extend:()=>a.U,app:()=>xt,compat:()=>Et});var a=e(2633),s=e(3349),i=e(1788),r=e(6156),o=e(6366),l=e(7037),p=e(1698),c=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.view=function(){return m("ul",{className:"Header-controls"},(0,p.Z)(this.items().toArray()))},e.config=function(t,n){n.retain=!0},e.items=function(){return new l.Z},n}(o.Z),u=e(7971),d=e(2122),h=e(6149),f=e(3131),g=e(8777),b=e(5462),v=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t),n.initAttrs=function(n){t.initAttrs.call(this,n),n.className="SessionDropdown",n.buttonClassName="Button Button--user Button--flat",n.menuClassName="Dropdown-menu--right"};var e=n.prototype;return e.view=function(n){return t.prototype.view.call(this,(0,d.Z)({},n,{children:this.items().toArray()}))},e.getButtonContent=function(){var t=app.session.user;return[(0,h.Z)(t)," ",m("span",{className:"Button-label"},(0,f.Z)(t))]},e.items=function(){var t=new l.Z;return t.add("logOut",b.Z.component({icon:"fas fa-sign-out-alt",onclick:app.session.logout.bind(app.session)},app.translator.trans("core.admin.header.log_out_button")),-100),t},n}(g.Z),_=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.view=function(){return m("ul",{className:"Header-controls"},(0,p.Z)(this.items().toArray()))},e.items=function(){var t=new l.Z;return t.add("help",m(u.Z,{href:"https://docs.flarum.org/troubleshoot.html",icon:"fas fa-question-circle",external:!0,target:"_blank"},app.translator.trans("core.admin.header.get_help"))),t.add("session",v.component()),t},n}(o.Z),y=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.view=function(){return m("div",{className:"DashboardWidget Widget "+this.className()},this.content())},e.className=function(){return""},e.content=function(){return[]},n}(o.Z),x=e(8292),Z=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.className=function(){return"LoadingModal Modal--small"},e.title=function(){return app.translator.trans("core.admin.loading.title")},e.content=function(){return""},n}(x.Z);(0,r.Z)(Z,"isDismissible",!1);var N=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.className=function(){return"StatusWidget"},e.content=function(){return m("ul",null,(0,p.Z)(this.items().toArray()))},e.items=function(){var t=new l.Z;return t.add("tools",m(g.Z,{label:app.translator.trans("core.admin.dashboard.tools_button"),icon:"fas fa-cog",buttonClassName:"Button",menuClassName:"Dropdown-menu--right"},m(b.Z,{onclick:this.handleClearCache.bind(this)},app.translator.trans("core.admin.dashboard.clear_cache_button")))),t.add("version-flarum",[m("strong",null,"Flarum"),m("br",null),app.forum.attribute("version")]),t.add("version-php",[m("strong",null,"PHP"),m("br",null),app.data.phpVersion]),t.add("version-mysql",[m("strong",null,"MySQL"),m("br",null),app.data.mysqlVersion]),t},e.handleClearCache=function(t){app.modal.show(Z),app.request({method:"DELETE",url:app.forum.attribute("apiUrl")+"/cache"}).then((function(){return window.location.reload()}))},n}(y);function w(t){return JSON.parse(app.data.settings.extensions_enabled).includes(t)}function E(){var t={};return Object.keys(app.data.extensions).map((function(n){var e=app.data.extensions[n],a=e.extra["flarum-extension"].category;e.extra["flarum-locale"]&&(a="language"),a in app.extensionCategories?(t[a]=t[a]||[],t[a].push(e)):(t.feature=t.feature||[],t.feature.push(e))})),t}var I=e(9236),P=e(5052),D=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.oninit=function(n){t.prototype.oninit.call(this,n),this.categorizedExtensions=E()},e.className=function(){return"ExtensionsWidget"},e.content=function(){var t=this,n=app.extensionCategories;return m("div",{className:"ExtensionsWidget-list"},Object.keys(n).map((function(n){return t.categorizedExtensions[n]?t.extensionCategory(n):""})))},e.extensionCategory=function(t){var n=this;return m("div",{className:"ExtensionList-Category"},m("h4",{className:"ExtensionList-Label"},app.translator.trans("core.admin.nav.categories."+t)),m("ul",{className:"ExtensionList"},this.categorizedExtensions[t].map((function(t){return n.extensionWidget(t)}))))},e.extensionWidget=function(t){return m("li",{className:"ExtensionListItem "+(w(t.id)?"":"disabled")},m(I.Z,{href:app.route("extension",{id:t.id})},m("div",{className:"ExtensionListItem-content"},m("span",{className:"ExtensionListItem-icon ExtensionIcon",style:t.icon},t.icon?(0,P.Z)(t.icon.name):""),m("span",{className:"ExtensionListItem-title"},t.extra["flarum-extension"].title))))},n}(y),C=e(9756),S=e(3340),k=e(4435),B=e(8112),T=e(1749),A=e(9015);function M(t){var n=JSON.parse(JSON.stringify(app.data.settings));return(0,d.Z)(app.data.settings,t),app.request({method:"POST",url:app.forum.attribute("apiUrl")+"/settings",body:t}).catch((function(t){throw app.data.settings=n,t}))}var O=function(t){function n(){return t.apply(this,arguments)||this}return(0,i.Z)(n,t),n.prototype.view=function(t){return[m("div",{className:(0,T.Z)(["AdminHeader",this.attrs.className])},m("div",{className:"container"},m("h2",null,(0,P.Z)(this.attrs.icon),t.children),m("div",{className:"AdminHeader-description"},this.attrs.description)))]},n}(o.Z),G=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.oninit=function(n){t.prototype.oninit.call(this,n),this.settings={},this.loading=!1},e.view=function(){var t=(0,T.Z)(["AdminPage",this.headerInfo().className]);return m("div",{className:t},this.header(),m("div",{className:"container"},this.content()))},e.content=function(){return""},e.submitButton=function(){return m(b.Z,{onclick:this.saveSettings.bind(this),className:"Button Button--primary",loading:this.loading,disabled:!this.isChanged()},app.translator.trans("core.admin.settings.submit_button"))},e.header=function(){var t=this.headerInfo();return m(O,{icon:t.icon,description:t.description,className:t.className+"-header"},t.title)},e.headerInfo=function(){return{className:"",icon:"",title:"",description:""}},e.buildSettingComponent=function(t){if("function"==typeof t)return t.call(this);var n=t.setting,e=t.help,a=(0,C.Z)(t,["setting","help"]);delete a.help;var s=this.setting([n])();return["bool","checkbox","switch","boolean"].includes(a.type)?m("div",{className:"Form-group"},m(k.Z,(0,d.Z)({state:!!s&&"0"!==s,onchange:this.settings[n]},a),a.label),m("div",{className:"helpText"},e)):["select","dropdown","selectdropdown"].includes(a.type)?m("div",{className:"Form-group"},m("label",null,a.label),m("div",{className:"helpText"},e),m(B.Z,(0,d.Z)({value:s||a.default,options:a.options,buttonClassName:"Button",onchange:this.settings[n]},a))):(a.className=(0,T.Z)(["FormControl",a.className]),m("div",{className:"Form-group"},a.label?m("label",null,a.label):"",m("div",{className:"helpText"},e),m("input",(0,d.Z)({type:a.type,bidi:this.setting(n)},a))))},e.onsaved=function(){this.loading=!1,app.alerts.show({type:"success"},app.translator.trans("core.admin.settings.saved_message"))},e.setting=function(t,n){return void 0===n&&(n=""),this.settings[t]=this.settings[t]||(0,A.Z)(app.data.settings[t]||n),this.settings[t]},e.dirty=function(){var t=this,n={};return Object.keys(this.settings).forEach((function(e){var a=t.settings[e]();a!==app.data.settings[e]&&(n[e]=a)})),n},e.isChanged=function(){return Object.keys(this.dirty()).length},e.saveSettings=function(t){return t.preventDefault(),app.alerts.clear(),this.loading=!0,M(this.dirty()).then(this.onsaved.bind(this))},n}(S.Z),F=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.headerInfo=function(){return{className:"DashboardPage",icon:"fas fa-chart-bar",title:app.translator.trans("core.admin.dashboard.title"),description:app.translator.trans("core.admin.dashboard.description")}},e.content=function(){return this.availableWidgets().toArray()},e.availableWidgets=function(){var t=new l.Z;return t.add("status",m(N,null),30),t.add("extensions",m(D,null),10),t},n}(G),U=e(9226),H=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.oninit=function(n){var e=this;t.prototype.oninit.call(this,n),this.localeOptions={};var a=app.data.locales;for(var s in a)this.localeOptions[s]=a[s]+" ("+s+")";this.displayNameOptions={},app.data.displayNameDrivers.forEach((function(t){this.displayNameOptions[t]=t}),this),this.slugDriverOptions={},Object.keys(app.data.slugDrivers).forEach((function(t){e.slugDriverOptions[t]={},app.data.slugDrivers[t].forEach((function(n){e.slugDriverOptions[t][n]=n}))}))},e.headerInfo=function(){return{className:"BasicsPage",icon:"fas fa-pencil-alt",title:app.translator.trans("core.admin.basics.title"),description:app.translator.trans("core.admin.basics.description")}},e.content=function(){var t=this;return[m("div",{className:"Form"},this.buildSettingComponent({type:"text",setting:"forum_title",label:app.translator.trans("core.admin.basics.forum_title_heading")}),this.buildSettingComponent({type:"text",setting:"forum_description",label:app.translator.trans("core.admin.basics.forum_description_heading"),help:app.translator.trans("core.admin.basics.forum_description_text")}),Object.keys(this.localeOptions).length>1?[this.buildSettingComponent({type:"select",setting:"default_locale",options:this.localeOptions,label:app.translator.trans("core.admin.basics.default_language_heading")}),this.buildSettingComponent({type:"switch",setting:"show_language_selector",label:app.translator.trans("core.admin.basics.show_language_selector_label")})]:"",m(U.Z,{className:"BasicsPage-homePage Form-group",label:app.translator.trans("core.admin.basics.home_page_heading")},m("div",{className:"helpText"},app.translator.trans("core.admin.basics.home_page_text")),this.homePageItems().toArray().map((function(n){var e=n.path,a=n.label;return m("label",{className:"checkbox"},m("input",{type:"radio",name:"homePage",value:e,bidi:t.setting("default_route")}),a)}))),m("div",{className:"Form-group BasicsPage-welcomeBanner-input"},m("label",null,app.translator.trans("core.admin.basics.welcome_banner_heading")),m("div",{className:"helpText"},app.translator.trans("core.admin.basics.welcome_banner_text")),m("input",{type:"text",className:"FormControl",bidi:this.setting("welcome_title")}),m("textarea",{className:"FormControl",bidi:this.setting("welcome_message")})),Object.keys(this.displayNameOptions).length>1?this.buildSettingComponent({type:"select",setting:"display_name_driver",options:this.displayNameOptions,label:app.translator.trans("core.admin.basics.display_name_heading"),help:app.translator.trans("core.admin.basics.display_name_text")}):"",Object.keys(this.slugDriverOptions).map((function(n){var e=t.slugDriverOptions[n];if(Object.keys(e).length>1)return t.buildSettingComponent({type:"select",setting:"slug_driver_"+n,options:e,label:app.translator.trans("core.admin.basics.slug_driver_heading",{model:n}),help:app.translator.trans("core.admin.basics.slug_driver_text",{model:n})})})),this.submitButton())]},e.homePageItems=function(){var t=new l.Z;return t.add("allDiscussions",{path:"/all",label:app.translator.trans("core.admin.basics.all_discussions_label")}),t},n}(G),L=e(512),R=e(7262),j=e(442),q=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.oninit=function(n){t.prototype.oninit.call(this,n),this.group=this.attrs.group||app.store.createRecord("groups"),this.nameSingular=(0,A.Z)(this.group.nameSingular()||""),this.namePlural=(0,A.Z)(this.group.namePlural()||""),this.icon=(0,A.Z)(this.group.icon()||""),this.color=(0,A.Z)(this.group.color()||""),this.isHidden=(0,A.Z)(this.group.isHidden()||!1)},e.className=function(){return"EditGroupModal Modal--small"},e.title=function(){return[this.color()||this.icon()?R.Z.component({icon:this.icon(),style:{backgroundColor:this.color()}}):""," ",this.namePlural()||app.translator.trans("core.admin.edit_group.title")]},e.content=function(){return m("div",{className:"Modal-body"},m("div",{className:"Form"},this.fields().toArray()))},e.fields=function(){var t=new l.Z;return t.add("name",m("div",{className:"Form-group"},m("label",null,app.translator.trans("core.admin.edit_group.name_label")),m("div",{className:"EditGroupModal-name-input"},m("input",{className:"FormControl",placeholder:app.translator.trans("core.admin.edit_group.singular_placeholder"),bidi:this.nameSingular}),m("input",{className:"FormControl",placeholder:app.translator.trans("core.admin.edit_group.plural_placeholder"),bidi:this.namePlural}))),30),t.add("color",m("div",{className:"Form-group"},m("label",null,app.translator.trans("core.admin.edit_group.color_label")),m("input",{className:"FormControl",placeholder:"#aaaaaa",bidi:this.color})),20),t.add("icon",m("div",{className:"Form-group"},m("label",null,app.translator.trans("core.admin.edit_group.icon_label")),m("div",{className:"helpText"},app.translator.trans("core.admin.edit_group.icon_text",{a:m("a",{href:"https://fontawesome.com/icons?m=free",tabindex:"-1"})})),m("input",{className:"FormControl",placeholder:"fas fa-bolt",bidi:this.icon})),10),t.add("hidden",m("div",{className:"Form-group"},k.Z.component({state:!!Number(this.isHidden()),onchange:this.isHidden},app.translator.trans("core.admin.edit_group.hide_label"))),10),t.add("submit",m("div",{className:"Form-group"},b.Z.component({type:"submit",className:"Button Button--primary EditGroupModal-save",loading:this.loading},app.translator.trans("core.admin.edit_group.submit_button")),this.group.exists&&this.group.id()!==j.Z.ADMINISTRATOR_ID?m("button",{type:"button",className:"Button EditGroupModal-delete",onclick:this.deleteGroup.bind(this)},app.translator.trans("core.admin.edit_group.delete_button")):""),-10),t},e.submitData=function(){return{nameSingular:this.nameSingular(),namePlural:this.namePlural(),color:this.color(),icon:this.icon(),isHidden:this.isHidden()}},e.onsubmit=function(t){var n=this;t.preventDefault(),this.loading=!0,this.group.save(this.submitData(),{errorHandler:this.onerror.bind(this)}).then(this.hide.bind(this)).catch((function(){n.loading=!1,m.redraw()}))},e.deleteGroup=function(){confirm(app.translator.trans("core.admin.edit_group.delete_confirmation"))&&(this.group.delete().then((function(){return m.redraw()})),this.hide())},n}(x.Z),W=e(2939);function z(t){var n=app.store.getById("groups",t);return n?L.Z.component({group:n,label:null}):""}function V(t,n){return app.getRequiredPermissions(n).forEach((function(n){var e=app.data.permissions[n]||[];-1!==e.indexOf(j.Z.GUEST_ID)||(t=-1!==e.indexOf(j.Z.MEMBER_ID)?t.filter((function(t){return t!==j.Z.GUEST_ID})):-1!==t.indexOf(j.Z.MEMBER_ID)?e:e.filter((function(n){return-1!==t.indexOf(n)}))),t=V(t,n)})),t}var J=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t),n.initAttrs=function(n){t.initAttrs.call(this,n),n.className="PermissionDropdown",n.buttonClassName="Button Button--text"};var e=n.prototype;return e.view=function(n){var e=this,a=[],s=app.data.permissions[this.attrs.permission]||[],i=-1!==(s=V(s,this.attrs.permission)).indexOf(j.Z.GUEST_ID),r=-1!==s.indexOf(j.Z.MEMBER_ID),o=app.store.getById("groups",j.Z.ADMINISTRATOR_ID);return this.attrs.label=i?R.Z.component({icon:"fas fa-globe"}):r?R.Z.component({icon:"fas fa-user"}):[z(j.Z.ADMINISTRATOR_ID),s.map(z)],this.showing&&(this.attrs.allowGuest&&a.push(b.Z.component({icon:!i||"fas fa-check",onclick:function(){return e.save([j.Z.GUEST_ID])},disabled:this.isGroupDisabled(j.Z.GUEST_ID)},[R.Z.component({icon:"fas fa-globe"})," ",app.translator.trans("core.admin.permissions_controls.everyone_button")])),a.push(b.Z.component({icon:!r||"fas fa-check",onclick:function(){return e.save([j.Z.MEMBER_ID])},disabled:this.isGroupDisabled(j.Z.MEMBER_ID)},[R.Z.component({icon:"fas fa-user"})," ",app.translator.trans("core.admin.permissions_controls.members_button")]),W.Z.component(),b.Z.component({icon:!(!i&&!r)||"fas fa-check",disabled:!i&&!r,onclick:function(t){t.shiftKey&&t.stopPropagation(),e.save([])}},[z(o.id())," ",o.namePlural()])),[].push.apply(a,app.store.all("groups").filter((function(t){return-1===[j.Z.ADMINISTRATOR_ID,j.Z.GUEST_ID,j.Z.MEMBER_ID].indexOf(t.id())})).map((function(t){return b.Z.component({icon:-1===s.indexOf(t.id())||"fas fa-check",onclick:function(n){n.shiftKey&&n.stopPropagation(),e.toggle(t.id())},disabled:e.isGroupDisabled(t.id())&&e.isGroupDisabled(j.Z.MEMBER_ID)&&e.isGroupDisabled(j.Z.GUEST_ID)},[z(t.id())," ",t.namePlural()])})))),t.prototype.view.call(this,(0,d.Z)({},n,{children:a}))},e.save=function(t){var n=this.attrs.permission;app.data.permissions[n]=t,app.request({method:"POST",url:app.forum.attribute("apiUrl")+"/permission",body:{permission:n,groupIds:t}})},e.toggle=function(t){var n=this.attrs.permission,e=app.data.permissions[n]||[],a=e.indexOf(t);-1!==a?e.splice(a,1):(e.push(t),e=e.filter((function(t){return-1===[j.Z.GUEST_ID,j.Z.MEMBER_ID].indexOf(t)}))),this.save(e)},e.isGroupDisabled=function(t){return-1===V([t],this.attrs.permission).indexOf(t)},n}(g.Z),K=e(6317),Q=function(t){function n(){return t.apply(this,arguments)||this}return(0,i.Z)(n,t),n.initAttrs=function(n){t.initAttrs.call(this,n),n.className="SettingDropdown",n.buttonClassName="Button Button--text",n.caretIcon="fas fa-caret-down",n.defaultLabel="Custom"},n.prototype.view=function(n){var e=this;return t.prototype.view.call(this,(0,d.Z)({},n,{children:this.attrs.options.map((function(t){var n,a=t.value,s=t.label,i=app.data.settings[e.attrs.key]===a;return b.Z.component({icon:!i||"fas fa-check",onclick:M.bind(e,(n={},n[e.attrs.key]=a,n)),active:i},s)}))}))},n}(K.Z),X=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.view=function(){var t=this.scopeItems().toArray(),n=function(n){return t.map((function(t){return m("td",null,t.render(n))}))};return m("table",{className:"PermissionGrid"},m("thead",null,m("tr",null,m("td",null),t.map((function(t){return m("th",null,t.label," ",t.onremove?b.Z.component({icon:"fas fa-times",className:"Button Button--text PermissionGrid-removeScope",onclick:t.onremove}):"")})),m("th",null,this.scopeControlItems().toArray()))),this.permissionItems().toArray().map((function(t){return m("tbody",null,m("tr",{className:"PermissionGrid-section"},m("th",null,t.label),n(t),m("td",null)),t.children.map((function(t){return m("tr",{className:"PermissionGrid-child"},m("th",null,(0,P.Z)(t.icon),t.label),n(t),m("td",null))})))})))},e.permissionItems=function(){var t=new l.Z;return t.add("view",{label:app.translator.trans("core.admin.permissions.read_heading"),children:this.viewItems().toArray()},100),t.add("start",{label:app.translator.trans("core.admin.permissions.create_heading"),children:this.startItems().toArray()},90),t.add("reply",{label:app.translator.trans("core.admin.permissions.participate_heading"),children:this.replyItems().toArray()},80),t.add("moderate",{label:app.translator.trans("core.admin.permissions.moderate_heading"),children:this.moderateItems().toArray()},70),t},e.viewItems=function(){var t=new l.Z;return t.add("viewDiscussions",{icon:"fas fa-eye",label:app.translator.trans("core.admin.permissions.view_discussions_label"),permission:"viewDiscussions",allowGuest:!0},100),t.add("viewHiddenGroups",{icon:"fas fa-users",label:app.translator.trans("core.admin.permissions.view_hidden_groups_label"),permission:"viewHiddenGroups"},100),t.add("viewUserList",{icon:"fas fa-users",label:app.translator.trans("core.admin.permissions.view_user_list_label"),permission:"viewUserList",allowGuest:!0},100),t.add("signUp",{icon:"fas fa-user-plus",label:app.translator.trans("core.admin.permissions.sign_up_label"),setting:function(){return Q.component({key:"allow_sign_up",options:[{value:"1",label:app.translator.trans("core.admin.permissions_controls.signup_open_button")},{value:"0",label:app.translator.trans("core.admin.permissions_controls.signup_closed_button")}]})}},90),t.add("viewLastSeenAt",{icon:"far fa-clock",label:app.translator.trans("core.admin.permissions.view_last_seen_at_label"),permission:"user.viewLastSeenAt"}),t.merge(app.extensionData.getAllExtensionPermissions("view")),t},e.startItems=function(){var t=new l.Z;return t.add("start",{icon:"fas fa-edit",label:app.translator.trans("core.admin.permissions.start_discussions_label"),permission:"startDiscussion"},100),t.add("allowRenaming",{icon:"fas fa-i-cursor",label:app.translator.trans("core.admin.permissions.allow_renaming_label"),setting:function(){var t=parseInt(app.data.settings.allow_renaming,10);return Q.component({defaultLabel:t?app.translator.transChoice("core.admin.permissions_controls.allow_some_minutes_button",t,{count:t}):app.translator.trans("core.admin.permissions_controls.allow_indefinitely_button"),key:"allow_renaming",options:[{value:"-1",label:app.translator.trans("core.admin.permissions_controls.allow_indefinitely_button")},{value:"10",label:app.translator.trans("core.admin.permissions_controls.allow_ten_minutes_button")},{value:"reply",label:app.translator.trans("core.admin.permissions_controls.allow_until_reply_button")}]})}},90),t.merge(app.extensionData.getAllExtensionPermissions("start")),t},e.replyItems=function(){var t=new l.Z;return t.add("reply",{icon:"fas fa-reply",label:app.translator.trans("core.admin.permissions.reply_to_discussions_label"),permission:"discussion.reply"},100),t.add("allowPostEditing",{icon:"fas fa-pencil-alt",label:app.translator.trans("core.admin.permissions.allow_post_editing_label"),setting:function(){var t=parseInt(app.data.settings.allow_post_editing,10);return Q.component({defaultLabel:t?app.translator.transChoice("core.admin.permissions_controls.allow_some_minutes_button",t,{count:t}):app.translator.trans("core.admin.permissions_controls.allow_indefinitely_button"),key:"allow_post_editing",options:[{value:"-1",label:app.translator.trans("core.admin.permissions_controls.allow_indefinitely_button")},{value:"10",label:app.translator.trans("core.admin.permissions_controls.allow_ten_minutes_button")},{value:"reply",label:app.translator.trans("core.admin.permissions_controls.allow_until_reply_button")}]})}},90),t.merge(app.extensionData.getAllExtensionPermissions("reply")),t},e.moderateItems=function(){var t=new l.Z;return t.add("viewIpsPosts",{icon:"fas fa-bullseye",label:app.translator.trans("core.admin.permissions.view_post_ips_label"),permission:"discussion.viewIpsPosts"},110),t.add("renameDiscussions",{icon:"fas fa-i-cursor",label:app.translator.trans("core.admin.permissions.rename_discussions_label"),permission:"discussion.rename"},100),t.add("hideDiscussions",{icon:"far fa-trash-alt",label:app.translator.trans("core.admin.permissions.delete_discussions_label"),permission:"discussion.hide"},90),t.add("deleteDiscussions",{icon:"fas fa-times",label:app.translator.trans("core.admin.permissions.delete_discussions_forever_label"),permission:"discussion.delete"},80),t.add("postWithoutThrottle",{icon:"fas fa-swimmer",label:app.translator.trans("core.admin.permissions.post_without_throttle_label"),permission:"postWithoutThrottle"},70),t.add("editPosts",{icon:"fas fa-pencil-alt",label:app.translator.trans("core.admin.permissions.edit_posts_label"),permission:"discussion.editPosts"},70),t.add("hidePosts",{icon:"far fa-trash-alt",label:app.translator.trans("core.admin.permissions.delete_posts_label"),permission:"discussion.hidePosts"},60),t.add("deletePosts",{icon:"fas fa-times",label:app.translator.trans("core.admin.permissions.delete_posts_forever_label"),permission:"discussion.deletePosts"},60),t.add("userEditCredentials",{icon:"fas fa-user-cog",label:app.translator.trans("core.admin.permissions.edit_users_credentials_label"),permission:"user.editCredentials"},60),t.add("userEditGroups",{icon:"fas fa-users-cog",label:app.translator.trans("core.admin.permissions.edit_users_groups_label"),permission:"user.editGroups"},60),t.add("userEdit",{icon:"fas fa-address-card",label:app.translator.trans("core.admin.permissions.edit_users_label"),permission:"user.edit"},60),t.merge(app.extensionData.getAllExtensionPermissions("moderate")),t},e.scopeItems=function(){var t=new l.Z;return t.add("global",{label:app.translator.trans("core.admin.permissions.global_heading"),render:function(t){return t.setting?t.setting():t.permission?J.component({permission:t.permission,allowGuest:t.allowGuest}):""}},100),t},e.scopeControlItems=function(){return new l.Z},n}(o.Z),Y=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.headerInfo=function(){return{className:"PermissionsPage",icon:"fas fa-key",title:app.translator.trans("core.admin.permissions.title"),description:app.translator.trans("core.admin.permissions.description")}},e.content=function(){return[m("div",{className:"PermissionsPage-groups"},app.store.all("groups").filter((function(t){return-1===[j.Z.GUEST_ID,j.Z.MEMBER_ID].indexOf(t.id())})).map((function(t){return m("button",{className:"Button Group",onclick:function(){return app.modal.show(q,{group:t})}},L.Z.component({group:t,className:"Group-icon",label:null}),m("span",{className:"Group-name"},t.namePlural()))})),m("button",{className:"Button Group Group--add",onclick:function(){return app.modal.show(q)}},(0,P.Z)("fas fa-plus",{className:"Group-icon"}),m("span",{className:"Group-name"},app.translator.trans("core.admin.permissions.new_group_button")))),m("div",{className:"PermissionsPage-permissions"},X.component())]},n}(G),tt=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.oninit=function(n){t.prototype.oninit.call(this,n),this.settings={},this.loading=!1},e.form=function(){return""},e.content=function(){return m("div",{className:"Modal-body"},m("div",{className:"Form"},this.form(),m("div",{className:"Form-group"},this.submitButton())))},e.submitButton=function(){return m(b.Z,{type:"submit",className:"Button Button--primary",loading:this.loading,disabled:!this.changed()},app.translator.trans("core.admin.settings.submit_button"))},e.setting=function(t,n){return void 0===n&&(n=""),this.settings[t]=this.settings[t]||(0,A.Z)(app.data.settings[t]||n),this.settings[t]},e.dirty=function(){var t=this,n={};return Object.keys(this.settings).forEach((function(e){var a=t.settings[e]();a!==app.data.settings[e]&&(n[e]=a)})),n},e.changed=function(){return Object.keys(this.dirty()).length},e.onsubmit=function(t){t.preventDefault(),this.loading=!0,M(this.dirty()).then(this.onsaved.bind(this),this.loaded.bind(this))},e.onsaved=function(){this.hide()},n}(x.Z),nt=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.className=function(){return"EditCustomCssModal Modal--large"},e.title=function(){return app.translator.trans("core.admin.edit_css.title")},e.form=function(){return[m("p",null,app.translator.trans("core.admin.edit_css.customize_text",{a:m("a",{href:"https://github.com/flarum/core/tree/master/less",target:"_blank"})})),m("div",{className:"Form-group"},m("textarea",{className:"FormControl",rows:"30",bidi:this.setting("custom_less")}))]},e.onsaved=function(){window.location.reload()},n}(tt),et=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.className=function(){return"EditCustomHeaderModal Modal--large"},e.title=function(){return app.translator.trans("core.admin.edit_header.title")},e.form=function(){return[m("p",null,app.translator.trans("core.admin.edit_header.customize_text")),m("div",{className:"Form-group"},m("textarea",{className:"FormControl",rows:"30",bidi:this.setting("custom_header")}))]},e.onsaved=function(){window.location.reload()},n}(tt),at=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.className=function(){return"EditCustomFooterModal Modal--large"},e.title=function(){return app.translator.trans("core.admin.edit_footer.title")},e.form=function(){return[m("p",null,app.translator.trans("core.admin.edit_footer.customize_text")),m("div",{className:"Form-group"},m("textarea",{className:"FormControl",rows:"30",bidi:this.setting("custom_footer")}))]},e.onsaved=function(){window.location.reload()},n}(tt),st=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return n=t.call.apply(t,[this].concat(a))||this,(0,r.Z)((0,s.Z)(n),"loading",!1),n}(0,i.Z)(n,t);var e=n.prototype;return e.view=function(n){return this.attrs.loading=this.loading,this.attrs.className=(this.attrs.className||"")+" Button",app.data.settings[this.attrs.name+"_path"]?(this.attrs.onclick=this.remove.bind(this),m("div",null,m("p",null,m("img",{src:app.forum.attribute(this.attrs.name+"Url"),alt:""})),m("p",null,t.prototype.view.call(this,(0,d.Z)({},n,{children:app.translator.trans("core.admin.upload_image.remove_button")}))))):(this.attrs.onclick=this.upload.bind(this),t.prototype.view.call(this,(0,d.Z)({},n,{children:app.translator.trans("core.admin.upload_image.upload_button")})))},e.upload=function(){var t=this;this.loading||$('<input type="file">').appendTo("body").hide().click().on("change",(function(n){var e=new FormData;e.append(t.attrs.name,$(n.target)[0].files[0]),t.loading=!0,m.redraw(),app.request({method:"POST",url:t.resourceUrl(),serialize:function(t){return t},body:e}).then(t.success.bind(t),t.failure.bind(t))}))},e.remove=function(){this.loading=!0,m.redraw(),app.request({method:"DELETE",url:this.resourceUrl()}).then(this.success.bind(this),this.failure.bind(this))},e.resourceUrl=function(){return app.forum.attribute("apiUrl")+"/"+this.attrs.name},e.success=function(t){window.location.reload()},e.failure=function(t){this.loading=!1,m.redraw()},n}(b.Z),it=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.headerInfo=function(){return{className:"AppearancePage",icon:"fas fa-paint-brush",title:app.translator.trans("core.admin.appearance.title"),description:app.translator.trans("core.admin.appearance.description")}},e.content=function(){return[m("div",{className:"Form"},m("fieldset",{className:"AppearancePage-colors"},m("legend",null,app.translator.trans("core.admin.appearance.colors_heading")),m("div",{className:"helpText"},app.translator.trans("core.admin.appearance.colors_text")),m("div",{className:"AppearancePage-colors-input"},this.buildSettingComponent({type:"text",setting:"theme_primary_color",placeholder:"#aaaaaa"}),this.buildSettingComponent({type:"text",setting:"theme_secondary_color",placeholder:"#aaaaaa"})),this.buildSettingComponent({type:"switch",setting:"theme_dark_mode",label:app.translator.trans("core.admin.appearance.dark_mode_label")}),this.buildSettingComponent({type:"switch",setting:"theme_colored_header",label:app.translator.trans("core.admin.appearance.colored_header_label")}),this.submitButton())),m("fieldset",null,m("legend",null,app.translator.trans("core.admin.appearance.logo_heading")),m("div",{className:"helpText"},app.translator.trans("core.admin.appearance.logo_text")),m(st,{name:"logo"})),m("fieldset",null,m("legend",null,app.translator.trans("core.admin.appearance.favicon_heading")),m("div",{className:"helpText"},app.translator.trans("core.admin.appearance.favicon_text")),m(st,{name:"favicon"})),m("fieldset",null,m("legend",null,app.translator.trans("core.admin.appearance.custom_header_heading")),m("div",{className:"helpText"},app.translator.trans("core.admin.appearance.custom_header_text")),b.Z.component({className:"Button",onclick:function(){return app.modal.show(et)}},app.translator.trans("core.admin.appearance.edit_header_button"))),m("fieldset",null,m("legend",null,app.translator.trans("core.admin.appearance.custom_footer_heading")),m("div",{className:"helpText"},app.translator.trans("core.admin.appearance.custom_footer_text")),b.Z.component({className:"Button",onclick:function(){return app.modal.show(at)}},app.translator.trans("core.admin.appearance.edit_footer_button"))),m("fieldset",null,m("legend",null,app.translator.trans("core.admin.appearance.custom_styles_heading")),m("div",{className:"helpText"},app.translator.trans("core.admin.appearance.custom_styles_text")),b.Z.component({className:"Button",onclick:function(){return app.modal.show(nt)}},app.translator.trans("core.admin.appearance.edit_css_button")))]},e.onsaved=function(){window.location.reload()},e.saveSettings=function(n){n.preventDefault();var e=/^#[0-9a-f]{3}([0-9a-f]{3})?$/i;e.test(this.settings.theme_primary_color())&&e.test(this.settings.theme_secondary_color())?t.prototype.saveSettings.call(this,n):alert(app.translator.trans("core.admin.appearance.enter_hex_message"))},n}(G),rt=e(6150),ot=e(2232),lt=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.oninit=function(n){t.prototype.oninit.call(this,n),this.sendingTest=!1,this.refresh()},e.headerInfo=function(){return{className:"MailPage",icon:"fas fa-envelope",title:app.translator.trans("core.admin.email.title"),description:app.translator.trans("core.admin.email.description")}},e.refresh=function(){var t=this;this.loading=!0,this.status={sending:!1,errors:{}},app.request({method:"GET",url:app.forum.attribute("apiUrl")+"/mail/settings"}).then((function(n){t.driverFields=n.data.attributes.fields,t.status.sending=n.data.attributes.sending,t.status.errors=n.data.attributes.errors,t.loading=!1,m.redraw()}))},e.content=function(){var t=this;if(this.loading)return m(ot.Z,null);var n=this.driverFields[this.setting("mail_driver")()],e=Object.keys(n);return m("div",{className:"Form"},this.buildSettingComponent({type:"text",setting:"mail_from",label:app.translator.trans("core.admin.email.addresses_heading"),className:"MailPage-MailSettings"}),this.buildSettingComponent({type:"select",setting:"mail_driver",options:Object.keys(this.driverFields).reduce((function(t,n){var e;return(0,d.Z)({},t,((e={})[n]=n,e))}),{}),label:app.translator.trans("core.admin.email.driver_heading"),className:"MailPage-MailSettings"}),this.status.sending||rt.Z.component({dismissible:!1},app.translator.trans("core.admin.email.not_sending_message")),e.length>0&&m(U.Z,{label:app.translator.trans("core.admin.email."+this.setting("mail_driver")()+"_heading"),className:"MailPage-MailSettings"},m("div",{className:"MailPage-MailSettings-input"},e.map((function(e){var a=n[e];return[t.buildSettingComponent({type:"string"==typeof t.setting(e)()?"text":"select",label:app.translator.trans("core.admin.email."+e+"_label"),setting:e,options:a}),t.status.errors[e]&&m("p",{className:"ValidationError"},t.status.errors[e])]})))),this.submitButton(),m(U.Z,{label:app.translator.trans("core.admin.email.send_test_mail_heading"),className:"MailPage-MailSettings"},m("div",{className:"helpText"},app.translator.trans("core.admin.email.send_test_mail_text",{email:app.session.user.email()})),b.Z.component({className:"Button Button--primary",disabled:this.sendingTest||this.isChanged(),onclick:function(){return t.sendTestEmail()}},app.translator.trans("core.admin.email.send_test_mail_button"))))},e.sendTestEmail=function(){var t=this;this.saving||this.sendingTest||(this.sendingTest=!0,app.alerts.dismiss(this.testEmailSuccessAlert),app.request({method:"POST",url:app.forum.attribute("apiUrl")+"/mail/test"}).then((function(n){t.sendingTest=!1,t.testEmailSuccessAlert=app.alerts.show({type:"success"},app.translator.trans("core.admin.email.send_test_mail_success"))})).catch((function(n){throw t.sendingTest=!1,m.redraw(),n})))},e.saveSettings=function(n){t.prototype.saveSettings.call(this,n).then(this.refresh())},n}(G),pt=e(5589),ct=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.oninit=function(n){t.prototype.oninit.call(this,n),this.extensionId=this.attrs.extensionId},e.permissionItems=function(){var n=t.prototype.permissionItems.call(this);return n.items=Object.entries(n.items).filter((function(t){return t[0],t[1].content.children.length>0})).reduce((function(t,n){var e=n[0],a=n[1];return t[e]=a,t}),{}),n},e.viewItems=function(){return app.extensionData.getExtensionPermissions(this.extensionId,"view")||new l.Z},e.startItems=function(){return app.extensionData.getExtensionPermissions(this.extensionId,"start")||new l.Z},e.replyItems=function(){return app.extensionData.getExtensionPermissions(this.extensionId,"reply")||new l.Z},e.moderateItems=function(){return app.extensionData.getExtensionPermissions(this.extensionId,"moderate")||new l.Z},e.scopeControlItems=function(){var t=new l.Z;return t.add("configureScopes",m(b.Z,{className:"Button Button--text",onclick:function(){return m.route.set(app.route("permissions"))}},app.translator.trans("core.admin.extension.configure_scopes"))),t},n}(X),ut=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.oninit=function(n){if(t.prototype.oninit.call(this,n),this.extension=app.data.extensions[this.attrs.id],this.changingState=!1,this.infoFields={discuss:"fas fa-comment-alt",documentation:"fas fa-book",support:"fas fa-life-ring",website:"fas fa-link",donate:"fas fa-donate",source:"fas fa-code"},!this.extension)return m.route.set(app.route("dashboard"))},e.className=function(){return this.extension?this.extension.id+"-Page":""},e.view=function(){return this.extension?m("div",{className:"ExtensionPage "+this.className()},this.header(),this.isEnabled()?m("div",{className:"ExtensionPage-body"},this.sections().toArray()):m("div",{className:"container"},m("h3",{className:"ExtensionPage-subHeader"},app.translator.trans("core.admin.extension.enable_to_see")))):null},e.header=function(){var t=this.isEnabled();return[m("div",{className:"ExtensionPage-header"},m("div",{className:"container"},m("div",{className:"ExtensionTitle"},m("span",{className:"ExtensionIcon",style:this.extension.icon},this.extension.icon?(0,P.Z)(this.extension.icon.name):""),m("div",{className:"ExtensionName"},m("h2",null,this.extension.extra["flarum-extension"].title)),m("div",{className:"ExtensionPage-headerTopItems"},m("ul",null,(0,p.Z)(this.topItems().toArray())))),m("div",{className:"helpText"},this.extension.description),m("div",{className:"ExtensionPage-headerItems"},m(k.Z,{state:this.changingState?!t:t,loading:this.changingState,onchange:this.toggle.bind(this,this.extension.id)},t?app.translator.trans("core.admin.extension.enabled"):app.translator.trans("core.admin.extension.disabled")),m("aside",{className:"ExtensionInfo"},m("ul",null,(0,p.Z)(this.infoItems().toArray()))))))]},e.sections=function(){var t=new l.Z;return t.add("content",this.content()),t.add("permissions",[m("div",{className:"ExtensionPage-permissions"},m("div",{className:"ExtensionPage-permissions-header"},m("div",{className:"container"},m("h2",{className:"ExtensionTitle"},app.translator.trans("core.admin.extension.permissions_title")))),m("div",{className:"container"},app.extensionData.extensionHasPermissions(this.extension.id)?ct.component({extensionId:this.extension.id}):m("h3",{className:"ExtensionPage-subHeader"},app.translator.trans("core.admin.extension.no_permissions"))))]),t},e.content=function(){var t=app.extensionData.getSettings(this.extension.id);return m("div",{className:"ExtensionPage-settings"},m("div",{className:"container"},t?m("div",{className:"Form"},t.map(this.buildSettingComponent.bind(this)),m("div",{className:"Form-group"},this.submitButton())):m("h3",{className:"ExtensionPage-subHeader"},app.translator.trans("core.admin.extension.no_settings"))))},e.topItems=function(){var t=this,n=new l.Z;return n.add("version",m("span",{className:"ExtensionVersion"},this.extension.version)),this.isEnabled()||n.add("uninstall",m(b.Z,{icon:"fas fa-trash-alt",className:"Button Button--primary",onclick:function(){confirm(app.translator.trans("core.admin.extension.confirm_uninstall"))&&(app.request({url:app.forum.attribute("apiUrl")+"/extensions/"+t.extension.id,method:"DELETE"}).then((function(){return window.location.reload()})),app.modal.show(Z))}.bind(this)},app.translator.trans("core.admin.extension.uninstall_button"))),n},e.infoItems=function(){var t=this,n=new l.Z,e=this.extension.links;if(e.authors.length){var a=[];e.authors.map((function(t){a.push(m(I.Z,{href:t.link,external:!0,target:"_blank"},t.name))})),n.add("authors",[(0,P.Z)("fas fa-user"),m("span",null,(0,pt.Z)(a))])}return Object.keys(this.infoFields).map((function(a){e[a]&&n.add(a,m(u.Z,{href:e[a],icon:t.infoFields[a],external:!0,target:"_blank"},app.translator.trans("core.admin.extension.info_links."+a)))})),n},e.toggle=function(){var t=this,n=this.isEnabled();this.changingState=!0,app.request({url:app.forum.attribute("apiUrl")+"/extensions/"+this.extension.id,method:"PATCH",body:{enabled:!n},errorHandler:this.onerror.bind(this)}).then((function(){n||localStorage.setItem("enabledExtension",t.extension.id),window.location.reload()})),app.modal.show(Z)},e.isEnabled=function(){return w(this.extension.id)},e.onerror=function(t){if(setTimeout((function(){app.modal.close()}),300),this.changingState=!1,409!==t.status)throw t;var n=t.response.errors[0];app.alerts.show({type:"error"},app.translator.trans("core.lib.error."+n.code+"_message",{extension:n.extension,extensions:n.extensions.join(", ")}))},n}(G),mt=function(t){function n(){return t.apply(this,arguments)||this}return(0,i.Z)(n,t),n.prototype.onmatch=function(n,e,a){return app.extensionData.getPage(n.id)||t.prototype.onmatch.call(this,n,e,a)},n}(e(4965).Z);function dt(t){t.routes={dashboard:{path:"/",component:F},basics:{path:"/basics",component:H},permissions:{path:"/permissions",component:Y},appearance:{path:"/appearance",component:it},mail:{path:"/mail",component:lt},extension:{path:"/extension/:id",component:ut,resolverClass:mt}}}(0,r.Z)(mt,"extension",null);var ht=e(5873),ft=e(7330),gt=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.getButtonContent=function(n){var e=t.prototype.getButtonContent.call(this,n),a=app.data.extensions[this.attrs.extensionId],s=this.statusItems(a.id).toArray();return e.unshift(m("span",{className:"ExtensionListItem-icon ExtensionIcon",style:a.icon},a.icon?(0,P.Z)(a.icon.name):"")),e.push(s),e},e.statusItems=function(t){var n=new l.Z;return n.add("enabled",m("span",{class:"ExtensionListItem-Dot "+(w(t)?"enabled":"disabled")})),n},n}(u.Z),bt=function(t){function n(){return t.apply(this,arguments)||this}(0,i.Z)(n,t);var e=n.prototype;return e.oninit=function(n){t.prototype.oninit.call(this,n),this.query=(0,A.Z)("")},e.view=function(){return m(K.Z,{className:"AdminNav App-titleControl AdminNav-Main",buttonClassName:"Button"},this.items().toArray().concat(this.extensionItems().toArray()))},e.oncreate=function(n){t.prototype.oncreate.call(this,n),this.scrollToActive()},e.onupdate=function(){this.scrollToActive()},e.scrollToActive=function(){var t=$(".Dropdown-menu").children(".active"),n=$("#admin-navigation"),e=app.previous.type?250:0;t.length>0&&(t[0].offsetTop>n.scrollTop()+n.outerHeight()||t[0].offsetTop+t[0].offsetHeight<n.scrollTop())&&n.animate({scrollTop:t[0].offsetTop-n.height()/2},e)},e.items=function(){var t=new l.Z;return t.add("category-core",m("h4",{className:"ExtensionListTitle"},app.translator.trans("core.admin.nav.categories.core"))),t.add("dashboard",m(u.Z,{href:app.route("dashboard"),icon:"far fa-chart-bar",title:app.translator.trans("core.admin.nav.dashboard_title")},app.translator.trans("core.admin.nav.dashboard_button"))),t.add("basics",m(u.Z,{href:app.route("basics"),icon:"fas fa-pencil-alt",title:app.translator.trans("core.admin.nav.basics_title")},app.translator.trans("core.admin.nav.basics_button"))),t.add("mail",m(u.Z,{href:app.route("mail"),icon:"fas fa-envelope",title:app.translator.trans("core.admin.nav.email_title")},app.translator.trans("core.admin.nav.email_button"))),t.add("permissions",m(u.Z,{href:app.route("permissions"),icon:"fas fa-key",title:app.translator.trans("core.admin.nav.permissions_title")},app.translator.trans("core.admin.nav.permissions_button"))),t.add("appearance",m(u.Z,{href:app.route("appearance"),icon:"fas fa-paint-brush",title:app.translator.trans("core.admin.nav.appearance_title")},app.translator.trans("core.admin.nav.appearance_button"))),t.add("search",m("div",{className:"Search-input"},m("input",{className:"FormControl SearchBar",bidi:this.query,type:"search",placeholder:app.translator.trans("core.admin.nav.search_placeholder")}))),t},e.extensionItems=function(){var t=this,n=new l.Z,e=E(),a=app.extensionCategories;return Object.keys(e).map((function(s){t.query()||n.add("category-"+s,m("h4",{className:"ExtensionListTitle"},app.translator.trans("core.admin.nav.categories."+s)),a[s]),e[s].map((function(e){var i=t.query().toUpperCase(),r=e.extra["flarum-extension"].title||"",o=e.description||"";(!i||r.toUpperCase().includes(i)||o.toUpperCase().includes(i))&&n.add("extension-"+e.id,m(gt,{href:app.route("extension",{id:e.id}),extensionId:e.id,className:"ExtensionNavButton",title:o},r),a[s])}))})),n},n}(o.Z),vt=function(){function t(){this.data={},this.currentExtension=null}var n=t.prototype;return n.for=function(t){return this.currentExtension=t,this.data[t]=this.data[t]||{},this},n.registerSetting=function(t,n){return void 0===n&&(n=0),this.data[this.currentExtension].settings=this.data[this.currentExtension].settings||new l.Z,"function"==typeof t&&(t.setting=Math.random().toString(36)),this.data[this.currentExtension].settings.add(t.setting,t,n),this},n.registerPermission=function(t,n,e){return void 0===n&&(n=null),void 0===e&&(e=0),this.data[this.currentExtension].permissions=this.data[this.currentExtension].permissions||{},this.data[this.currentExtension].permissions[n]||(this.data[this.currentExtension].permissions[n]=new l.Z),this.data[this.currentExtension].permissions[n].add(t.permission,t,e),this},n.registerPage=function(t){return this.data[this.currentExtension].page=t,this},n.getSettings=function(t){return!(!this.data[t]||!this.data[t].settings)&&this.data[t].settings.toArray()},n.getAllExtensionPermissions=function(t){var n=this,e=new l.Z;return Object.keys(this.data).map((function(a){n.extensionHasPermissions(a)&&n.data[a].permissions[t]&&e.merge(n.data[a].permissions[t])})),e},n.getExtensionPermissions=function(t,n){return this.extensionHasPermissions(t)&&this.data[t].permissions[n]?this.data[t].permissions[n]:new l.Z},n.extensionHasPermissions=function(t){return!(!this.data[t]||!this.data[t].permissions)},n.getPage=function(t){return!!this.data[t]&&this.data[t].page},t}(),_t=function(t){function n(){var n;return n=t.call(this)||this,(0,r.Z)((0,s.Z)(n),"extensionData",new vt),(0,r.Z)((0,s.Z)(n),"extensionCategories",{feature:30,theme:20,language:10}),(0,r.Z)((0,s.Z)(n),"history",{canGoBack:function(){return!0},getPrevious:function(){},backUrl:function(){return n.forum.attribute("baseUrl")},back:function(){window.location=this.backUrl()}}),dt((0,s.Z)(n)),n}(0,i.Z)(n,t);var e=n.prototype;return e.mount=function(){document.location.hash||(document.location.hash="#/"),m.route.prefix="#",t.prototype.mount.call(this),m.mount(document.getElementById("app-navigation"),{view:function(){return ft.Z.component({className:"App-backControl",drawer:!0})}}),m.mount(document.getElementById("header-navigation"),ft.Z),m.mount(document.getElementById("header-primary"),c),m.mount(document.getElementById("header-secondary"),_),m.mount(document.getElementById("admin-navigation"),bt)},e.getRequiredPermissions=function(t){var n=[];return"startDiscussion"!==t&&0!==t.indexOf("discussion.")||n.push("viewDiscussions"),"discussion.delete"===t&&n.push("discussion.hide"),"discussion.deletePosts"===t&&n.push("discussion.hidePosts"),n},n}(ht.Z),yt=new _t;window.app=yt;const xt=yt;var Zt=e(1834);const Nt=(0,d.Z)(Zt.Z,{"utils/saveSettings":M,"utils/ExtensionData":vt,"utils/isExtensionEnabled":w,"utils/getCategorizedExtensions":E,"components/SettingDropdown":Q,"components/EditCustomFooterModal":at,"components/SessionDropdown":v,"components/HeaderPrimary":c,"components/AdminPage":G,"components/AppearancePage":it,"components/StatusWidget":N,"components/ExtensionsWidget":D,"components/HeaderSecondary":_,"components/SettingsModal":tt,"components/DashboardWidget":y,"components/ExtensionPage":ut,"components/ExtensionLinkButton":gt,"components/PermissionGrid":X,"components/ExtensionPermissionGrid":ct,"components/MailPage":lt,"components/UploadImageButton":st,"components/LoadingModal":Z,"components/DashboardPage":F,"components/BasicsPage":H,"components/EditCustomHeaderModal":et,"components/PermissionsPage":Y,"components/PermissionDropdown":J,"components/AdminNav":bt,"components/AdminHeader":O,"components/EditCustomCssModal":nt,"components/EditGroupModal":q,routes:dt,AdminApplication:_t});var wt=e(1556);Nt.app=xt;var Et=(0,wt.Z)(Nt,"admin")},6646:(t,n,e)=>{"use strict";function a(t,n,e){return void 0===e&&(e=0),(e>0?"...":"")+t.substring(e,e+n)+(t.length>e+n?"...":"")}function s(t){return t.toLowerCase().replace(/[^a-z0-9]/gi,"-").replace(/-+/g,"-").replace(/-$|^-/g,"")}function i(t){var n=t.replace(/(<\/p>|<br>)/g,"$1 &nbsp;").replace(/<img\b[^>]*>/gi," "),e=$("<div/>").html(n);return e.find(i.removeSelectors.join(",")).remove(),e.text().replace(/\s+/g," ").trim()}function r(t){return t.substr(0,1).toUpperCase()+t.substr(1)}e.r(n),e.d(n,{truncate:()=>a,slug:()=>s,getPlainContent:()=>i,ucfirst:()=>r}),i.removeSelectors=["blockquote","script"]}},t=>{t.O(0,[516,661],(()=>(5552,t(t.s=5552))));var n=t.O();flarum.core=n}]);
//# sourceMappingURL=flarum-core.js.map