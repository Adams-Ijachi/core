(self.webpackChunk_flarum_core=self.webpackChunk_flarum_core||[]).push([[997],{2065:(t,e,n)=>{n.d(e,{Z:()=>Y});var r=n(2122),a=n(6156),i=n(4594),s=n(2587),o=n(1788),u=n(8931),c=function(t){function e(){return t.apply(this,arguments)||this}(0,o.Z)(e,t);var n=e.prototype;return n.view=function(){var t=this.attrs.state.modal;return m("div",{className:"ModalManager modal fade"},t?t.componentClass.component((0,r.Z)({},t.attrs,{animateShow:this.animateShow.bind(this),animateHide:this.animateHide.bind(this),state:this.attrs.state})):"")},n.oncreate=function(e){t.prototype.oncreate.call(this,e),this.$().on("hidden.bs.modal",this.attrs.state.close.bind(this.attrs.state))},n.animateShow=function(t){var e=!!this.attrs.state.modal.componentClass.isDismissible;this.$().hasClass("in")?t():this.$().one("shown.bs.modal",t).modal({backdrop:e||"static",keyboard:e}).modal("show")},n.animateHide=function(){this.$().modal("hide")},e}(u.Z);window.flreg.add("components/ModalManager",c);var l=n(7607),d=function(t){function e(){return t.apply(this,arguments)||this}(0,o.Z)(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),this.state=this.attrs.state},n.view=function(){var t=this;return m("div",{className:"AlertManager"},Object.entries(this.state.getActiveAlerts()).map((function(e){var n=e[0],a=e[1];return m("div",{className:"AlertManager-alert"},m(a.componentClass,(0,r.Z)({},a.attrs,{ondismiss:t.state.dismiss.bind(t.state,n)}),a.children))})))},e}(u.Z);window.flreg.add("components/AlertManager",d);var h=n(5556),p=function(t){function e(){return t.apply(this,arguments)||this}(0,o.Z)(e,t);var n=e.prototype;return n.className=function(){return"RequestErrorModal Modal--large"},n.title=function(){return this.attrs.error.xhr?this.attrs.error.xhr.status+" "+this.attrs.error.xhr.statusText:""},n.content=function(){var t,e=this.attrs,n=e.error,r=e.formattedError;if(r)t=r.join("\n\n");else try{var a=n.response||JSON.parse(n.responseText);t=JSON.stringify(a,null,2)}catch(i){t=n.responseText}return m("div",{className:"Modal-body"},m("pre",null,this.attrs.error.options.method," ",this.attrs.error.options.url,m("br",null),m("br",null),t))},e}(h.Z);window.flreg.add("components/RequestErrorModal",p);var f=n(507),v=n(1555),w=function(){function t(){this.translations={},this.locale=null}var e=t.prototype;return e.addTranslations=function(t){(0,r.Z)(this.translations,t)},e.trans=function(t,e){var n=this.translations[t];return n?this.apply(n,e||{}):t},e.transChoice=function(t,e,n){var r=this.translations[t];return r?(e=parseInt(e,10),r=this.pluralize(r,e),this.apply(r,n||{})):t},e.apply=function(t,e){if("user"in e){var n=(0,v.Z)(e,"user");e.username||(e.username=(0,f.Z)(n))}t=t.split(new RegExp("({[a-z0-9_]+}|</?[a-z0-9_]+>)","gi"));var r=[],a=[r];return t.forEach((function(t){var n=t.match(new RegExp("{([a-z0-9_]+)}|<(/?)([a-z0-9_]+)>","i"));if(n){if(n[1])a[0].push(e[n[1]]);else if(n[3])if(n[2]){var r,i=a[0].splice(0,a[0].length);(r=a[0]).push.apply(r,m.fragment(i).children),a.shift()}else{var s=e[n[3]]||{tag:n[3],children:[]};a[0].push(s),a.unshift(s.children||s)}}else a[0].push(t)})),r.filter((function(t){return t}))},e.pluralize=function(t,e){var n=this,r=new RegExp(/^\w+\: +(.+)$/),a=new RegExp(/^\s*((\{\s*(\-?\d+[\s*,\s*\-?\d+]*)\s*\})|([\[\]])\s*(-Inf|\-?\d+)\s*,\s*(\+?Inf|\-?\d+)\s*([\[\]]))\s?(.+?)$/),i=new RegExp(/^\s*(\{\s*(\-?\d+[\s*,\s*\-?\d+]*)\s*\})|([\[\]])\s*(-Inf|\-?\d+)\s*,\s*(\+?Inf|\-?\d+)\s*([\[\]])/),s=[],o=[];return t.split("|").forEach((function(t){if(a.test(t)){var e=t.match(a);o[e[0]]=e[e.length-1]}else if(r.test(t)){var n=t.match(r);s.push(n[1])}else s.push(t)})),o.forEach((function(t,r){if(i.test(r)){var a=r.match(i);if(a[1]){var s=a[2].split(",");for(var u in s)if(e==s[u])return o[r]}else{var c=n.convertNumber(a[4]),l=n.convertNumber(a[5]);if(("["===a[3]?e>=c:e>c)&&("]"===a[6]?e<=l:e<l))return o[r]}}})),s[this.pluralPosition(e,this.locale)]||s[0]||void 0},e.convertNumber=function(t){return"-Inf"===t?Number.NEGATIVE_INFINITY:"+Inf"===t||"Inf"===t?Number.POSITIVE_INFINITY:parseInt(t,10)},e.pluralPosition=function(t,e){switch("pt_BR"===e&&(e="xbr"),e.length>3&&(e=e.split("_")[0]),e){case"bo":case"dz":case"id":case"ja":case"jv":case"ka":case"km":case"kn":case"ko":case"ms":case"th":case"vi":case"zh":return 0;case"af":case"az":case"bn":case"bg":case"ca":case"da":case"de":case"el":case"en":case"eo":case"es":case"et":case"eu":case"fa":case"fi":case"fo":case"fur":case"fy":case"gl":case"gu":case"ha":case"he":case"hu":case"is":case"it":case"ku":case"lb":case"ml":case"mn":case"mr":case"nah":case"nb":case"ne":case"nl":case"nn":case"no":case"om":case"or":case"pa":case"pap":case"ps":case"pt":case"so":case"sq":case"sv":case"sw":case"ta":case"te":case"tk":case"tr":case"ur":case"zu":return 1==t?0:1;case"am":case"bh":case"fil":case"fr":case"gun":case"hi":case"ln":case"mg":case"nso":case"xbr":case"ti":case"wa":return 0===t||1==t?0:1;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2;case"cs":case"sk":return 1==t?0:t>=2&&t<=4?1:2;case"ga":return 1==t?0:2==t?1:2;case"lt":return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2;case"sl":return t%100==1?0:t%100==2?1:t%100==3||t%100==4?2:3;case"mk":return t%10==1?0:1;case"mt":return 1==t?0:0===t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3;case"lv":return 0===t?0:t%10==1&&t%100!=11?1:2;case"pl":return 1==t?0:t%10>=2&&t%10<=4&&(t%100<12||t%100>14)?1:2;case"cy":return 1==t?0:2==t?1:8==t||11==t?2:3;case"ro":return 1==t?0:0===t||t%100>0&&t%100<20?1:2;case"ar":return 0===t?0:1==t?1:2==t?2:t>=3&&t<=10?3:t>=11&&t<=99?4:5;default:return 0}},t}();window.flreg.add("common/Translator",w);var g=function(){function t(t){this.data={},this.models=t}var e=t.prototype;return e.pushPayload=function(t){t.included&&t.included.map(this.pushObject.bind(this));var e=t.data instanceof Array?t.data.map(this.pushObject.bind(this)):this.pushObject(t.data);return e.payload=t,e},e.pushObject=function(t){if(!this.models[t.type])return null;var e=this.data[t.type]=this.data[t.type]||{};return e[t.id]?e[t.id].pushData(t):e[t.id]=this.createRecord(t.type,t),e[t.id].exists=!0,e[t.id]},e.find=function(t,e,n,a){void 0===n&&(n={}),void 0===a&&(a={});var i=n,s=app.forum.attribute("apiUrl")+"/"+t;return e instanceof Array?s+="?filter[id]="+e.join(","):"object"==typeof e?i=e:e&&(s+="/"+e),app.request((0,r.Z)({method:"GET",url:s,params:i},a)).then(this.pushPayload.bind(this))},e.getById=function(t,e){return this.data[t]&&this.data[t][e]},e.getBy=function(t,e,n){return this.all(t).filter((function(t){return t[e]()===n}))[0]},e.all=function(t){var e=this.data[t];return e?Object.keys(e).map((function(t){return e[t]})):[]},e.remove=function(t){delete this.data[t.data.type][t.id()]},e.createRecord=function(t,e){return void 0===e&&(e={}),e.type=e.type||t,new this.models[t](e,this)},t}();window.flreg.add("common/Store",g);var b=function(){function t(t,e){this.user=t,this.csrfToken=e}var e=t.prototype;return e.login=function(t,e){return void 0===e&&(e={}),app.request((0,r.Z)({method:"POST",url:app.forum.attribute("baseUrl")+"/login",body:t},e))},e.logout=function(){window.location=app.forum.attribute("baseUrl")+"/logout?token="+this.csrfToken},t}();window.flreg.add("common/Session",b);var Z=function(){function t(){var t=this;$("#content").on("click tap",(function(e){t.isOpen()&&(e.preventDefault(),t.hide())}))}var e=t.prototype;return e.isOpen=function(){return $("#app").hasClass("drawerOpen")},e.hide=function(){var t=$("#app");if(t.hasClass("drawerOpen")){var e=$("#drawer");e.css("visibility","visible").one("transitionend",(function(){return e.css("visibility","")})),t.removeClass("drawerOpen"),this.$backdrop&&this.$backdrop.remove()}},e.show=function(){var t=this;$("#app").addClass("drawerOpen"),this.$backdrop=$("<div/>").addClass("drawer-backdrop fade").appendTo("body").click((function(){return t.hide()})),setTimeout((function(){return t.$backdrop.addClass("in")}))},t}();window.flreg.add("utils/Drawer",Z);var y=n(2231);function A(t,e){void 0===e&&(e="");var n={};for(var r in t){var a=t[r];if("resolver"in a)n[e+a.path]=a.resolver;else{if(!("component"in a))throw new Error("Either a resolver or a component must be provided for the route ["+r+"]");var i="resolverClass"in a?a.resolverClass:y.Z;n[e+a.path]=new i(a.component,r)}}return n}window.flreg.add("utils/mapRoutes",A);var N=function(t,e,n,r){(0,a.Z)(this,"status",void 0),(0,a.Z)(this,"options",void 0),(0,a.Z)(this,"xhr",void 0),(0,a.Z)(this,"responseText",void 0),(0,a.Z)(this,"response",void 0),(0,a.Z)(this,"alert",void 0),this.status=t,this.responseText=e,this.options=n,this.xhr=r;try{this.response=JSON.parse(e)}catch(i){this.response=null}this.alert=null};window.flreg.add("utils/RequestError",N);var k=n(8e3),C=n(9052);function x(){$("[data-humantime]").each((function(){var t=$(this),e=(0,C.Z)(t.attr("datetime"));t.html(e)}))}function E(){setInterval(x,1e4)}function T(t,e,n){var a=t[e];t[e]=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=a?a.apply(this,e):void 0;return n.apply(this,[i].concat(e)),i},(0,r.Z)(t[e],a)}window.flreg.add("utils/liveHumanTimes",E),window.flreg.add("common/extend",T),window.flreg.add("common/override",(function(t,e,n){var a=t[e];t[e]=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return n.apply(this,[a.bind(this)].concat(e))},(0,r.Z)(t[e],a)}));var D=n(2743),I=function(t){function e(){return t.apply(this,arguments)||this}return(0,o.Z)(e,t),e.prototype.apiEndpoint=function(){return"/"},e}(D.Z);function O(t){for(var e=0,n=0;n<t.length;n++)e+=t.charCodeAt(n);var r=function(t,e,n){var r,a,i,s=Math.floor(6*t),o=6*t-s,u=n*(1-e),c=n*(1-o*e),l=n*(1-(1-o)*e);switch(s%6){case 0:r=n,a=l,i=u;break;case 1:r=c,a=n,i=u;break;case 2:r=u,a=n,i=l;break;case 3:r=u,a=c,i=n;break;case 4:r=l,a=u,i=n;break;case 5:r=n,a=u,i=c}return{r:Math.floor(255*r),g:Math.floor(255*a),b:Math.floor(255*i)}}(e%360/360,.3,.9);return""+r.r.toString(16)+r.g.toString(16)+r.b.toString(16)}window.flreg.add("models/Forum",I),window.flreg.add("utils/stringToColor",O);var B=n(8529),M=n(7880),P=function(t){function e(){return t.apply(this,arguments)||this}return(0,o.Z)(e,t),e}(D.Z);(0,r.Z)(P.prototype,{username:D.Z.attribute("username"),slug:D.Z.attribute("slug"),displayName:D.Z.attribute("displayName"),email:D.Z.attribute("email"),isEmailConfirmed:D.Z.attribute("isEmailConfirmed"),password:D.Z.attribute("password"),avatarUrl:D.Z.attribute("avatarUrl"),preferences:D.Z.attribute("preferences"),groups:D.Z.hasMany("groups"),joinTime:D.Z.attribute("joinTime",D.Z.transformDate),lastSeenAt:D.Z.attribute("lastSeenAt",D.Z.transformDate),markedAllAsReadAt:D.Z.attribute("markedAllAsReadAt",D.Z.transformDate),unreadNotificationCount:D.Z.attribute("unreadNotificationCount"),newNotificationCount:D.Z.attribute("newNotificationCount"),discussionCount:D.Z.attribute("discussionCount"),commentCount:D.Z.attribute("commentCount"),canEdit:D.Z.attribute("canEdit"),canEditCredentials:D.Z.attribute("canEditCredentials"),canEditGroups:D.Z.attribute("canEditGroups"),canDelete:D.Z.attribute("canDelete"),avatarColor:null,color:(0,B.Z)("username","avatarUrl","avatarColor",(function(t,e,n){return n?"rgb("+n.join(", ")+")":e?(this.calculateAvatarColor(),""):"#"+O(t)})),isOnline:function(){return dayjs().subtract(5,"minutes").isBefore(this.lastSeenAt())},badges:function(){var t=new i.Z,e=this.groups();return e&&e.forEach((function(e){t.add("group"+e.id(),M.Z.component({group:e}))})),t},calculateAvatarColor:function(){var t=new Image,e=this;t.onload=function(){var t=new ColorThief;e.avatarColor=t.getColor(this),e.freshness=new Date,m.redraw()},t.crossOrigin="anonymous",t.src=this.avatarUrl()},savePreferences:function(t){var e=this.preferences();return(0,r.Z)(e,t),this.save({preferences:e})}}),window.flreg.add("models/User",P);var R=n(8197),S=n(1666),j=function(t){function e(){return t.apply(this,arguments)||this}return(0,o.Z)(e,t),e}(D.Z);(0,r.Z)(j.prototype,{number:D.Z.attribute("number"),discussion:D.Z.hasOne("discussion"),createdAt:D.Z.attribute("createdAt",D.Z.transformDate),user:D.Z.hasOne("user"),contentType:D.Z.attribute("contentType"),content:D.Z.attribute("content"),contentHtml:D.Z.attribute("contentHtml"),contentPlain:(0,B.Z)("contentHtml",S.AH),editedAt:D.Z.attribute("editedAt",D.Z.transformDate),editedUser:D.Z.hasOne("editedUser"),isEdited:(0,B.Z)("editedAt",(function(t){return!!t})),hiddenAt:D.Z.attribute("hiddenAt",D.Z.transformDate),hiddenUser:D.Z.hasOne("hiddenUser"),isHidden:(0,B.Z)("hiddenAt",(function(t){return!!t})),canEdit:D.Z.attribute("canEdit"),canHide:D.Z.attribute("canHide"),canDelete:D.Z.attribute("canDelete")}),window.flreg.add("models/Post",j);var L=n(4032),U=function(t){function e(){return t.apply(this,arguments)||this}return(0,o.Z)(e,t),e}(D.Z);(0,r.Z)(U.prototype,{contentType:D.Z.attribute("contentType"),content:D.Z.attribute("content"),createdAt:D.Z.attribute("createdAt",D.Z.transformDate),isRead:D.Z.attribute("isRead"),user:D.Z.hasOne("user"),fromUser:D.Z.hasOne("fromUser"),subject:D.Z.hasOne("subject")}),window.flreg.add("models/Notification",U);var _=n(6250),H=n(8422),q=n(7757),z=n.n(q),F=n(2137),G=function(){function t(){this.modal=null}var e=t.prototype;return e.show=function(){var t=(0,F.Z)(z().mark((function t(e,n){var r;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.prototype instanceof h.Z){t.next=10;break}if("function"!=typeof e){t.next=8;break}return t.next=4,e();case 4:r=t.sent,e=r.default,t.next=10;break;case 8:throw console.error("The ModalManager can only show Modals"),new Error("The ModalManager can only show Modals");case 10:if(!e.init){t.next=13;break}throw console.error("The componentClass parameter must be a modal class, not a modal instance. Whichever extension triggered this modal should be updated to comply with beta 14."),new Error("The componentClass parameter must be a modal class, not a modal instance. Whichever extension triggered this modal should be updated to comply with beta 14.");case 13:clearTimeout(this.closeTimeout),this.modal={componentClass:e,attrs:n},m.redraw.sync();case 16:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),e.close=function(){var t=this;this.modal&&(this.closeTimeout=setTimeout((function(){t.modal=null,m.redraw()})))},t}();window.flreg.add("states/ModalManagerState",G);var J=function(){function t(){(0,a.Z)(this,"activeAlerts",{}),(0,a.Z)(this,"alertId",0)}var e=t.prototype;return e.getActiveAlerts=function(){return this.activeAlerts},e.show=function(t,e,n){var r,a=l.Z,i={};if(1==arguments.length?r=t:2==arguments.length?(i=t,r=e):3==arguments.length&&(a=t,i=e,r=n),i===l.Z||i instanceof l.Z)throw console.error("The AlertManager can only show Alerts. Whichever extension triggered this alert should be updated to comply with beta 14."),new Error("The AlertManager can only show Alerts. Whichever extension triggered this alert should be updated to comply with beta 14.");return this.activeAlerts[++this.alertId]={children:r,attrs:i,componentClass:a},m.redraw(),this.alertId},e.dismiss=function(t){t&&t in this.activeAlerts&&(delete this.activeAlerts[t],m.redraw())},e.clear=function(){this.activeAlerts={},m.redraw()},t}();function K(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}window.flreg.add("states/AlertManagerState",J);var Y=function(){function t(){(0,a.Z)(this,"forum",null),(0,a.Z)(this,"routes",{}),(0,a.Z)(this,"initializers",new i.Z),(0,a.Z)(this,"session",null),(0,a.Z)(this,"translator",new w),(0,a.Z)(this,"store",new g({forums:I,users:P,discussions:R.Z,posts:j,groups:L.Z,notifications:U})),(0,a.Z)(this,"cache",{}),(0,a.Z)(this,"booted",!1),(0,a.Z)(this,"requestErrorAlert",null),(0,a.Z)(this,"current",new H.Z(null)),(0,a.Z)(this,"previous",new H.Z(null)),(0,a.Z)(this,"modal",new G),(0,a.Z)(this,"alerts",new J),(0,a.Z)(this,"data",void 0),(0,a.Z)(this,"title",""),(0,a.Z)(this,"titleCount",0),(0,a.Z)(this,"initialRoute",void 0)}var e=t.prototype;return e.load=function(t){this.data=t,this.translator.locale=t.locale},e.boot=function(){var t=this;this.initializers.toArray().forEach((function(e){return e(t)})),this.store.pushPayload({data:this.data.resources}),this.forum=this.store.getById("forums",1),this.session=new b(this.store.getById("users",this.data.session.userId),this.data.session.csrfToken),this.mount(),this.initialRoute=window.location.href},e.bootExtensions=function(t){var e=this;Object.keys(t).forEach((function(n){for(var r,a=t[n],i=K((0,_.Z)(a.extend));!(r=i()).done;){r.value.extend(e,{name:n,exports:a})}}))},e.mount=function(t){var e=this;void 0===t&&(t=""),m.mount(document.getElementById("modal"),{view:function(){return c.component({state:e.modal})}}),m.mount(document.getElementById("alerts"),{view:function(){return d.component({state:e.alerts})}}),this.drawer=new Z,m.route(document.getElementById("content"),t+"/",A(this.routes,t));var n=new k.Z((function(t){var e=$("#app"),n=e.offset().top;e.toggleClass("affix",t>=n).toggleClass("scrolled",t>n),$(".App-header").toggleClass("navbar-fixed-top",t>=n)}));n.start(),n.update(),$((function(){$("body").addClass("ontouchstart"in window?"touch":"no-touch")})),E()},e.preloadedApiDocument=function(){if(this.data.apiDocument&&window.location.href===this.initialRoute){var t=this.store.pushPayload(this.data.apiDocument);return this.data.apiDocument=null,t}return null},e.screen=function(){return getComputedStyle(document.documentElement).getPropertyValue("--flarum-screen")},e.setTitle=function(t){this.title=t,this.updateTitle()},e.setTitleCount=function(t){this.titleCount=t,this.updateTitle()},e.updateTitle=function(){var t=this.titleCount?"("+this.titleCount+") ":"",e=this.title&&m.route.get()!==this.forum.attribute("basePath")+"/"?this.title+" - ":"",n=this.forum.attribute("title");document.title=t+e+n},e.request=function(t){var e=this,n=(0,r.Z)({},t);if(n.background=n.background||!0,T(n,"config",(function(t,n){return n.setRequestHeader("X-CSRF-Token",e.session.csrfToken)})),"GET"!==n.method&&"POST"!==n.method){var a=n.method;T(n,"config",(function(t,e){return e.setRequestHeader("X-HTTP-Method-Override",a)})),n.method="POST"}n.deserialize=n.deserialize||function(t){return t},n.errorHandler=n.errorHandler||function(t){throw t};var i=n.extract;return n.extract=function(t){var e;e=i?i(t.responseText):t.responseText||null;var r=t.status;if(r<200||r>299)throw new N(r,e,n,t);if(t.getResponseHeader){var a=t.getResponseHeader("X-CSRF-Token");a&&(app.session.csrfToken=a)}try{return JSON.parse(e)}catch(s){throw new N(500,e,n,t)}},this.requestErrorAlert&&this.alerts.dismiss(this.requestErrorAlert),m.request(n).then((function(t){return t}),(function(t){var r;switch(t.status){case 422:r=t.response.errors.map((function(t){return[t.detail,m("br",null)]})).reduce((function(t,e){return t.concat(e)}),[]).slice(0,-1);break;case 401:case 403:r=app.translator.trans("core.lib.error.permission_denied_message");break;case 404:case 410:r=app.translator.trans("core.lib.error.not_found_message");break;case 429:r=app.translator.trans("core.lib.error.rate_limit_exceeded_message");break;default:r=app.translator.trans("core.lib.error.generic_message")}var a=app.forum.attribute("debug"),i=t.response&&t.response.errors,o=Array.isArray(i)&&i[0]&&i[0].detail&&i.map((function(t){return decodeURI(t.detail)}));t.alert={type:"error",content:r,controls:a&&[m(s.Z,{className:"Button Button--link",onclick:e.showDebug.bind(e,t,o)},"Debug")]};try{n.errorHandler(t)}catch(t){if(a&&t.xhr){var u,c=t.options,l=c.method,d=c.url,h=t.xhr.status,p=void 0===h?"":h;console.group(l+" "+d+" "+p),(u=console).error.apply(u,o||[t]),console.groupEnd()}e.requestErrorAlert=e.alerts.show(t.alert,t.alert.content)}return Promise.reject(t)}))},e.showDebug=function(t,e){this.alerts.dismiss(this.requestErrorAlert),this.modal.show(p,{error:t,formattedError:e})},e.route=function(t,e){void 0===e&&(e={});var n=this.routes[t];if(!n)throw new Error("Route '"+t+"' does not exist");var r=n.path.replace(/:([^\/]+)/g,(function(t,n){return(0,v.Z)(e,n)}));for(var a in e)e.hasOwnProperty(a)&&!e[a]&&delete e[a];var i=m.buildQueryString(e);return(""===m.route.prefix?this.forum.attribute("basePath"):"")+r+(i?"?"+i:"")},t}();window.flreg.add("common/Application",Y)},8931:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(2122),a=n(6156),i=function(){function t(){(0,a.Z)(this,"element",void 0),(0,a.Z)(this,"attrs",void 0)}var e=t.prototype;return e.oninit=function(t){this.setAttrs(t.attrs)},e.oncreate=function(t){this.element=t.dom},e.onbeforeupdate=function(t){this.setAttrs(t.attrs)},e.$=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e=$(this.element);return t?e.find(t):e})),t.component=function(t,e){void 0===t&&(t={}),void 0===e&&(e=null);var n=(0,r.Z)({},t);return m(this,n,e)},e.setAttrs=function(t){if(void 0===t&&(t={}),this.constructor.initAttrs(t),t){if("children"in t)throw new Error("["+this.constructor.name+'] The "children" attribute of attrs should never be used. Either pass children in as the vnode children or rename the attribute');if("tag"in t)throw new Error("["+this.constructor.name+'] You cannot use the "tag" attribute name with Mithril 2.')}this.attrs=t},t.initAttrs=function(t){},t}();window.flreg.add("common/Component",i)},5536:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(6156),a=function(){function t(){(0,r.Z)(this,"moduleExports",{}),(0,r.Z)(this,"onLoads",{})}var e=t.prototype;return e.add=function(t,e){var n=this.onLoads[t];n&&n.map((function(t){e=t(e)})),this.moduleExports[t]=e},e.onLoad=function(t,e){var n=this.moduleExports[t];n?this.moduleExports[t]=e(n):(this.onLoads[t]=this.onLoads[t]||[],this.onLoads[t].push(e))},e.get=function(t){if(this.moduleExports[t])return this.moduleExports[t]},t}()},2743:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(2122),a=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=null),this.data=t,this.freshness=new Date,this.exists=!1,this.store=e}var e=t.prototype;return e.id=function(){return this.data.id},e.attribute=function(t){return this.data.attributes[t]},e.pushData=function(e){for(var n in e)if("object"==typeof e[n])for(var r in this.data[n]=this.data[n]||{},e[n])e[n][r]instanceof t&&(e[n][r]={data:t.getIdentifier(e[n][r])}),this.data[n][r]=e[n][r];else this.data[n]=e[n];this.freshness=new Date},e.pushAttributes=function(t){this.pushData({attributes:t})},e.save=function(e,n){var a=this;void 0===n&&(n={});var i={type:this.data.type,id:this.data.id,attributes:e};if(e.relationships){for(var s in i.relationships={},e.relationships){var o=e.relationships[s];i.relationships[s]={data:o instanceof Array?o.map(t.getIdentifier):t.getIdentifier(o)}}delete e.relationships}var u=this.copyData();this.pushData(i);var c={data:i};return n.meta&&(c.meta=n.meta),app.request((0,r.Z)({method:this.exists?"PATCH":"POST",url:app.forum.attribute("apiUrl")+this.apiEndpoint(),body:c},n)).then((function(t){return a.store.data[t.data.type]=a.store.data[t.data.type]||{},a.store.data[t.data.type][t.data.id]=a,a.store.pushPayload(t)}),(function(t){throw a.pushData(u),m.redraw(),t}))},e.delete=function(t,e){var n=this;return void 0===e&&(e={}),this.exists?app.request((0,r.Z)({method:"DELETE",url:app.forum.attribute("apiUrl")+this.apiEndpoint(),body:t},e)).then((function(){n.exists=!1,n.store.remove(n)})):Promise.resolve()},e.apiEndpoint=function(){return"/"+this.data.type+(this.exists?"/"+this.data.id:"")},e.copyData=function(){return JSON.parse(JSON.stringify(this.data))},t.attribute=function(t,e){return function(){var n=this.data.attributes&&this.data.attributes[t];return e?e(n):n}},t.hasOne=function(t){return function(){if(this.data.relationships){var e=this.data.relationships[t];if(e)return app.store.getById(e.data.type,e.data.id)}return!1}},t.hasMany=function(t){return function(){if(this.data.relationships){var e=this.data.relationships[t];if(e)return e.data.map((function(t){return app.store.getById(t.type,t.id)}))}return!1}},t.transformDate=function(t){return t?new Date(t):null},t.getIdentifier=function(t){return{type:t.data.type,id:t.data.id}},t}();window.flreg.add("common/Model",a)},7607:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(2122),a=n(1788),i=n(8931),s=n(2587),o=n(7473),u=n(1555),c=function(t){function e(){return t.apply(this,arguments)||this}return(0,a.Z)(e,t),e.prototype.view=function(t){var e=(0,r.Z)({},this.attrs),n=(0,u.Z)(e,"type");e.className="Alert Alert--"+n+" "+(e.className||"");var a=(0,u.Z)(e,"content")||t.children,i=(0,u.Z)(e,"controls")||[],c=(0,u.Z)(e,"dismissible"),l=(0,u.Z)(e,"ondismiss"),d=[];return(c||void 0===c)&&d.push(m(s.Z,{icon:"fas fa-times",className:"Button Button--link Button--icon Alert-dismiss",onclick:l})),m("div",e,m("span",{className:"Alert-body"},a),m("ul",{className:"Alert-controls"},(0,o.Z)(i.concat(d))))},e}(i.Z);window.flreg.add("components/Alert",c)},9048:(t,e,n)=>{n.d(e,{Z:()=>u});var r=n(2122),a=n(1788),i=n(8931),s=n(9100),o=n(1555),u=function(t){function e(){return t.apply(this,arguments)||this}(0,a.Z)(e,t);var n=e.prototype;return n.view=function(){var t=(0,r.Z)({},this.attrs),e=(0,o.Z)(t,"type"),n=(0,o.Z)(t,"icon");return t.className="Badge "+(e?"Badge--"+e:"")+" "+(t.className||""),t.title=(0,o.Z)(t,"label")||"",m("span",t,n?(0,s.Z)(n,{className:"Badge-icon"}):m.trust("&nbsp;"))},n.oncreate=function(e){t.prototype.oncreate.call(this,e),this.attrs.label&&this.$().tooltip()},e}(i.Z);window.flreg.add("components/Badge",u)},2587:(t,e,n)=>{n.d(e,{Z:()=>d});var r=n(2122),a=n(1788),i=n(8931),s=n(9100),o=n(1650),u=n(1555),c=n(5731),l=n(8726),d=function(t){function e(){return t.apply(this,arguments)||this}(0,a.Z)(e,t);var n=e.prototype;return n.view=function(t){var e=(0,r.Z)({},this.attrs);e.type=e.type||"button",e.title&&!t.children&&(e["aria-label"]=e.title),"object"==typeof e.title&&(e.title=(0,c.Z)(e.title)),!e.title&&t.children&&(e.title=(0,c.Z)(t.children));var n=(0,u.Z)(e,"icon"),a=(0,u.Z)(e,"loading");return(e.disabled||a)&&delete e.onclick,e.className=(0,o.Z)([e.className,n&&"hasIcon",(e.disabled||a)&&"disabled",a&&"loading"]),m("button",e,this.getButtonContent(t.children))},n.getButtonContent=function(t){var e=this.attrs.icon;return[e&&!0!==e?(0,s.Z)(e,{className:"Button-icon"}):"",t?m("span",{className:"Button-label"},t):"",this.attrs.loading?m(l.Z,{size:"tiny",className:"LoadingIndicator--inline"}):""]},e}(i.Z);window.flreg.add("components/Button",d)},5971:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(1788),a=n(8931),i=n(8726),s=n(9100),o=n(1650),u=n(1017),c=function(t){function e(){return t.apply(this,arguments)||this}(0,r.Z)(e,t);var n=e.prototype;return n.view=function(t){"0"===this.attrs.state&&(this.attrs.state=!1);var e=(0,o.Z)(["Checkbox",this.attrs.state?"on":"off",this.attrs.className,this.attrs.loading&&"loading",this.attrs.disabled&&"disabled"]);return m("label",{className:e},m("input",{type:"checkbox",checked:this.attrs.state,disabled:this.attrs.disabled,onchange:(0,u.Z)("checked",this.onchange.bind(this))}),m("div",{className:"Checkbox-display"},this.getDisplay()),t.children)},n.getDisplay=function(){return this.attrs.loading?m(i.Z,{size:"tiny"}):(0,s.Z)(this.attrs.state?"fas fa-check":"fas fa-times")},n.onchange=function(t){this.attrs.onchange&&this.attrs.onchange(t,this)},e}(a.Z);window.flreg.add("components/Checkbox",c)},9657:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(1788),a=n(8931),i=n(9100),s=n(7473),o=function(t){function e(){return t.apply(this,arguments)||this}(0,r.Z)(e,t),e.initAttrs=function(t){t.className=t.className||"",t.buttonClassName=t.buttonClassName||"",t.menuClassName=t.menuClassName||"",t.label=t.label||"",t.caretIcon=void 0!==t.caretIcon?t.caretIcon:"fas fa-caret-down",t.accessibleToggleLabel=t.accessibleToggleLabel||app.translator.trans("core.lib.dropdown.toggle_dropdown_accessible_label")};var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),this.showing=!1},n.view=function(t){var e=t.children?(0,s.Z)(t.children):[];return m("div",{className:"ButtonGroup Dropdown dropdown "+this.attrs.className+" itemCount"+e.length+(this.showing?" open":"")},this.getButton(t.children),this.getMenu(e))},n.oncreate=function(e){var n=this;t.prototype.oncreate.call(this,e),this.$().on("shown.bs.dropdown",(function(){n.showing=!0,n.attrs.onshow&&n.attrs.onshow(),m.redraw();var t=n.$(".Dropdown-menu"),e=t.hasClass("Dropdown-menu--right");t.removeClass("Dropdown-menu--top Dropdown-menu--right"),t.toggleClass("Dropdown-menu--top",t.offset().top+t.height()>$(window).scrollTop()+$(window).height()),t.offset().top<0&&t.removeClass("Dropdown-menu--top"),t.toggleClass("Dropdown-menu--right",e||t.offset().left+t.width()>$(window).scrollLeft()+$(window).width())})),this.$().on("hidden.bs.dropdown",(function(){n.showing=!1,n.attrs.onhide&&n.attrs.onhide(),m.redraw()}))},n.getButton=function(t){return m("button",{className:"Dropdown-toggle "+this.attrs.buttonClassName,"aria-haspopup":"menu","aria-label":this.attrs.accessibleToggleLabel,"data-toggle":"dropdown",onclick:this.attrs.onclick},this.getButtonContent(t))},n.getButtonContent=function(t){return[this.attrs.icon?(0,i.Z)(this.attrs.icon,{className:"Button-icon"}):"",m("span",{className:"Button-label"},this.attrs.label),this.attrs.caretIcon?(0,i.Z)(this.attrs.caretIcon,{className:"Button-caret"}):""]},n.getMenu=function(t){return m("ul",{className:"Dropdown-menu dropdown-menu "+this.attrs.menuClassName},t)},e}(a.Z);window.flreg.add("components/Dropdown",o)},4926:(t,e,n)=>{n.d(e,{Z:()=>s});var r=n(1788),a=n(8931),i=n(7473),s=function(t){function e(){return t.apply(this,arguments)||this}return(0,r.Z)(e,t),e.prototype.view=function(t){return m("fieldset",{className:this.attrs.className},m("legend",null,this.attrs.label),m("ul",null,(0,i.Z)(t.children)))},e}(a.Z);window.flreg.add("components/FieldSet",s)},7880:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(1788),a=function(t){function e(){return t.apply(this,arguments)||this}return(0,r.Z)(e,t),e.initAttrs=function(e){t.initAttrs.call(this,e),e.group&&(e.icon=e.group.icon(),e.style={backgroundColor:e.group.color()},e.label=void 0===e.label?e.group.nameSingular():e.label,e.type="group--"+e.group.id(),delete e.group)},e}(n(9048).Z);window.flreg.add("components/GroupBadge",a)},8046:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(9756),a=n(1788),i=n(8931),s=n(1555),o=function(t){function e(){return t.apply(this,arguments)||this}return(0,a.Z)(e,t),e.prototype.view=function(t){var e=t.attrs,n=e.options,a=void 0===n?{}:n,i=(0,r.Z)(e,["options"]);i.href=i.href||"";var o=t.children||{tag:"#",children:t.text};return i.external?m("a",i,o):(i.href===m.route.get()&&("replace"in a||(a.replace=!0)),(0,s.Z)(i,"force")&&("state"in a||(a.state={}),"key"in a.state||(a.state.key=Date.now())),i.options=a,m(m.route.Link,i,o))},e}(i.Z);window.flreg.add("components/Link",o)},2558:(t,e,n)=>{n.d(e,{Z:()=>s});var r=n(1788),a=n(2587),i=n(8046),s=function(t){function e(){return t.apply(this,arguments)||this}return(0,r.Z)(e,t),e.initAttrs=function(e){t.initAttrs.call(this,e),e.active=this.isActive(e),void 0===e.force&&(e.force=!0)},e.prototype.view=function(e){var n=t.prototype.view.call(this,e);return n.tag=i.Z,n.attrs.active=String(n.attrs.active),n},e.isActive=function(t){return void 0!==t.active?t.active:m.route.get()===t.href},e}(a.Z);window.flreg.add("components/LinkButton",s)},8726:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(2122),a=n(1788),i=n(8931),s=n(1035),o=function(t){function e(){return t.apply(this,arguments)||this}(0,a.Z)(e,t);var n=e.prototype;return n.view=function(){var t=(0,r.Z)({},this.attrs);return t.className="LoadingIndicator "+(t.className||""),delete t.size,m("div",t,m.trust("&nbsp;"))},n.oncreate=function(e){t.prototype.oncreate.call(this,e);var n={zIndex:"auto",color:this.$().css("color")};switch(this.attrs.size){case"large":(0,r.Z)(n,{lines:10,length:8,width:4,radius:8});break;case"tiny":(0,r.Z)(n,{lines:8,length:2,width:2,radius:3});break;default:(0,r.Z)(n,{lines:8,length:4,width:3,radius:5})}new s.$(n).spin(this.element)},e}(i.Z);window.flreg.add("components/LoadingIndicator",o)},5556:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(3349),a=n(1788),i=n(6156),s=n(8931),o=n(7607),u=n(2587),c=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,(0,i.Z)((0,r.Z)(e),"alertAttrs",null),e}(0,a.Z)(e,t);var n=e.prototype;return n.oncreate=function(e){var n=this;t.prototype.oncreate.call(this,e),this.attrs.animateShow((function(){return n.onready()}))},n.onbeforeremove=function(){if(!this.attrs.state.modal)return this.attrs.animateHide(),new Promise((function(t){return setTimeout(t,300)}))},n.view=function(){return this.alertAttrs&&(this.alertAttrs.dismissible=!1),m("div",{className:"Modal modal-dialog "+this.className()},m("div",{className:"Modal-content"},this.constructor.isDismissible?m("div",{className:"Modal-close App-backControl"},u.Z.component({icon:"fas fa-times",onclick:this.hide.bind(this),className:"Button Button--icon Button--link"})):"",m("form",{onsubmit:this.onsubmit.bind(this)},m("div",{className:"Modal-header"},m("h3",{className:"App-titleControl App-titleControl--text"},this.title())),this.alertAttrs?m("div",{className:"Modal-alert"},o.Z.component(this.alertAttrs)):"",this.content())))},n.className=function(){},n.title=function(){},n.content=function(){},n.onsubmit=function(){},n.onready=function(){this.$("form").find("input, select, textarea").first().focus().select()},n.hide=function(){this.attrs.state.close()},n.loaded=function(){this.loading=!1,m.redraw()},n.onerror=function(t){this.alertAttrs=t.alert,m.redraw(),422===t.status&&t.response.errors?this.$("form [name="+t.response.errors[0].source.pointer.replace("/data/attributes/","")+"]").select():this.onready()},e}(s.Z);(0,i.Z)(c,"isDismissible",!0),window.flreg.add("components/Modal",c)},4807:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(1788),a=n(8931),i=n(2587),s=n(2558),o=function(t){function e(){return t.apply(this,arguments)||this}(0,r.Z)(e,t);var n=e.prototype;return n.view=function(){var t=app,e=t.history,n=t.pane;return m("div",{className:"Navigation ButtonGroup "+(this.attrs.className||""),onmouseenter:n&&n.show.bind(n),onmouseleave:n&&n.onmouseleave.bind(n)},e.canGoBack()?[this.getBackButton(),this.getPaneButton()]:this.getDrawerButton())},n.getBackButton=function(){var t=app.history,e=t.getPrevious()||{};return s.Z.component({className:"Button Navigation-back Button--icon",href:t.backUrl(),icon:"fas fa-chevron-left",title:e.title,onclick:function(e){e.shiftKey||e.ctrlKey||e.metaKey||2===e.which||(e.preventDefault(),t.back())}})},n.getPaneButton=function(){var t=app.pane;return t&&t.active?i.Z.component({className:"Button Button--icon Navigation-pin"+(t.pinned?" active":""),onclick:t.togglePinned.bind(t),icon:"fas fa-thumbtack"}):""},n.getDrawerButton=function(){if(!this.attrs.drawer)return"";var t=app.drawer,e=app.session.user;return i.Z.component({className:"Button Button--icon Navigation-drawer"+(e&&e.newNotificationCount()?" new":""),onclick:function(e){e.stopPropagation(),t.show()},icon:"fas fa-bars"})},e}(a.Z);window.flreg.add("components/Navigation",o)},453:(t,e,n)=>{n.d(e,{Z:()=>s});var r=n(1788),a=n(8931),i=n(8422),s=function(t){function e(){return t.apply(this,arguments)||this}(0,r.Z)(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),app.previous=app.current,app.current=new i.Z(this.constructor,{routeName:this.attrs.routeName}),app.drawer.hide(),app.modal.close(),this.bodyClass="",this.scrollTopOnCreate=!0,this.useBrowserScrollRestoration=!0},n.oncreate=function(e){t.prototype.oncreate.call(this,e),this.bodyClass&&$("#app").addClass(this.bodyClass),this.scrollTopOnCreate&&$(window).scrollTop(0),"scrollRestoration"in history&&(history.scrollRestoration=this.useBrowserScrollRestoration?"auto":"manual")},n.onremove=function(){this.bodyClass&&$("#app").removeClass(this.bodyClass)},e}(a.Z);window.flreg.add("components/Page",s)},9349:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(1788),a=n(9657),i=n(9100);function s(t){var e=t.tag;return("string"!=typeof e||"a"===e||"button"===e)&&("initAttrs"in e&&e.initAttrs(t.attrs),"isActive"in e?e.isActive(t.attrs):t.attrs.active)}var o=function(t){function e(){return t.apply(this,arguments)||this}return(0,r.Z)(e,t),e.initAttrs=function(e){e.caretIcon=void 0!==e.caretIcon?e.caretIcon:"fas fa-sort",t.initAttrs.call(this,e),e.className+=" Dropdown--select"},e.prototype.getButtonContent=function(t){var e=t.find(s),n=e&&e.children||this.attrs.defaultLabel;return n instanceof Array&&(n=n[0]),[m("span",{className:"Button-label"},n),(0,i.Z)(this.attrs.caretIcon,{className:"Button-caret"})]},e}(a.Z);window.flreg.add("components/SelectDropdown",o)},5128:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(1788),a=function(t){function e(){return t.apply(this,arguments)||this}return(0,r.Z)(e,t),e.prototype.view=function(){return m("li",{className:"Dropdown-separator"})},e}(n(8931).Z);a.isListItem=!0;const i=a;window.flreg.add("components/Separator",a)},833:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(1788),a=function(t){function e(){return t.apply(this,arguments)||this}return(0,r.Z)(e,t),e.initAttrs=function(e){t.initAttrs.call(this,e),e.className=(e.className||"")+" Checkbox--switch"},e.prototype.getDisplay=function(){return this.attrs.loading?t.prototype.getDisplay.call(this):""},e}(n(5971).Z);window.flreg.add("components/Switch",a)},9908:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(2122);function a(t,e){void 0===e&&(e={}),e.className="Avatar "+(e.className||"");var n="",a="undefined"===e.title||e.title;if(a||delete e.title,t){var i=t.displayName()||"?",s=t.avatarUrl();if(a&&(e.title=e.title||i),s)return m("img",(0,r.Z)({},e,{src:s,alt:""}));n=i.charAt(0).toUpperCase(),e.style={background:t.color()}}return m("span",e,n)}window.flreg.add("helpers/avatar",a)},8966:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(7484),a=n.n(r);function i(t){var e=a()(t),n=e.format(),r=e.format("LLLL");return m("time",{pubdate:!0,datetime:n},r)}window.flreg.add("helpers/fullTime",i)},9100:(t,e,n)=>{function r(t,e){return void 0===e&&(e={}),e.className="icon "+t+" "+(e.className||""),m("i",e)}n.d(e,{Z:()=>r}),window.flreg.add("helpers/icon",r)},7473:(t,e,n)=>{n.d(e,{Z:()=>s});var r=n(5128),a=n(1650);function i(t){return t.tag===r.Z}function s(t){return t instanceof Array||(t=[t]),function(t){var e,n=[];return t.filter(Boolean).forEach((function(r,a){(!i(r)||e&&!i(e)&&a!==t.length-1)&&(e=r,n.push(r))})),n}(t).map((function(t){var e=t.tag&&t.tag.isListItem,n=t.tag&&t.tag.isActive&&t.tag.isActive(t.attrs),r=t.attrs&&t.attrs.itemClassName||t.itemClassName;return e&&(t.attrs=t.attrs||{},t.attrs.key=t.attrs.key||t.itemName,t.key=t.attrs.key),e?t:m("li",{className:(0,a.Z)([r,t.itemName&&"item-"+t.itemName,n&&"active"]),key:t.attrs&&t.attrs.key||t.itemName},t)}))}window.flreg.add("helpers/listItems",s)},507:(t,e,n)=>{function r(t){var e=t&&t.displayName()||app.translator.trans("core.lib.username.deleted_text");return m("span",{className:"username"},e)}n.d(e,{Z:()=>r}),window.flreg.add("helpers/username",r)},6920:(t,e,n)=>{n.d(e,{U:()=>r});var r={};n.r(r),n.d(r,{Model:()=>h,PostTypes:()=>f,Routes:()=>m});n(7865),n(5436),n(270),n(5377),n(9737),n(8852),n(6278),n(8294),n(5314);var a=n(4110),i=n.n(a),s=n(6176),o=n.n(s);function u(t,e){var n="select"===t.tag?t.attrs.multi?"multi":"select":t.attrs.type;return t.attrs.onchange="multi"===n?function(){e([].slice.call(this.selectedOptions,(function(t){return t.value})))}:"select"===n?function(t){e(this.selectedOptions[0].value)}:"checkbox"===n?function(t){e(this.checked)}:t.attrs.oninput=function(t){e(this.value)},"select"===t.tag?t.children.forEach((function(t){t.attrs.value!==e()&&t.children[0]!==e()||(t.attrs.selected=!0)})):"checkbox"===n?t.attrs.checked=e():"radio"===n?t.attrs.checked=e()===t.attrs.value:t.attrs.value=e(),t.attrs.bidi=null,t}u.view=function(t,e,n){return u(e,e.attrs.bidi)},window.flreg=new(n(5536).Z);const c=u;function l(t){var e=t.m,n=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var i=e.apply(this,arguments);return i.attrs||(i.attrs={}),i.attrs.bidi&&c(i,i.attrs.bidi),i};Object.keys(e).forEach((function(t){return n[t]=e[t]})),t.m=n}window.flreg.add("utils/bidi",u),window.flreg.add("utils/patchMithril",l);var d=n(6156),h=function(){function t(t,e){void 0===e&&(e=null),(0,d.Z)(this,"type",void 0),(0,d.Z)(this,"attributes",[]),(0,d.Z)(this,"hasOnes",[]),(0,d.Z)(this,"hasManys",[]),this.type=t,this.model=e}var e=t.prototype;return e.attribute=function(t){return this.attributes.push(t),this},e.hasOne=function(t){return this.hasOnes.push(t),this},e.hasMany=function(t){return this.hasManys.push(t),this},e.extend=function(t,e){this.model&&(t.store.models[this.type]=this.model);var n=t.store.models[this.type];this.attributes.forEach((function(t){return n.prototype[t]=n.attribute(t)})),this.hasOnes.forEach((function(t){return n.prototype[t]=n.hasOne(t)})),this.hasManys.forEach((function(t){return n.prototype[t]=n.hasMany(t)}))},t}();window.flreg.add("extend/Model",h);var p=n(2122),f=function(){function t(){(0,d.Z)(this,"postComponents",{})}var e=t.prototype;return e.add=function(t,e){return this.postComponents[t]=e,this},e.extend=function(t,e){(0,p.Z)(t.postComponents,this.postComponents)},t}();window.flreg.add("extend/PostTypes",f);var m=function(){function t(){(0,d.Z)(this,"routes",{})}var e=t.prototype;return e.add=function(t,e,n){return this.routes[t]={path:e,component:n},this},e.extend=function(t,e){(0,p.Z)(t.routes,this.routes)},t}();window.flreg.add("extend/Routes",m),dayjs.extend(i()),dayjs.extend(o()),l(window)},8197:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(2122),a=n(1788),i=n(2743),s=n(8529),o=n(4594),u=n(9048),c=function(t){function e(){return t.apply(this,arguments)||this}return(0,a.Z)(e,t),e}(i.Z);(0,r.Z)(c.prototype,{title:i.Z.attribute("title"),slug:i.Z.attribute("slug"),createdAt:i.Z.attribute("createdAt",i.Z.transformDate),user:i.Z.hasOne("user"),firstPost:i.Z.hasOne("firstPost"),lastPostedAt:i.Z.attribute("lastPostedAt",i.Z.transformDate),lastPostedUser:i.Z.hasOne("lastPostedUser"),lastPost:i.Z.hasOne("lastPost"),lastPostNumber:i.Z.attribute("lastPostNumber"),commentCount:i.Z.attribute("commentCount"),replyCount:(0,s.Z)("commentCount",(function(t){return Math.max(0,t-1)})),posts:i.Z.hasMany("posts"),mostRelevantPost:i.Z.hasOne("mostRelevantPost"),lastReadAt:i.Z.attribute("lastReadAt",i.Z.transformDate),lastReadPostNumber:i.Z.attribute("lastReadPostNumber"),isUnread:(0,s.Z)("unreadCount",(function(t){return!!t})),isRead:(0,s.Z)("unreadCount",(function(t){return app.session.user&&!t})),hiddenAt:i.Z.attribute("hiddenAt",i.Z.transformDate),hiddenUser:i.Z.hasOne("hiddenUser"),isHidden:(0,s.Z)("hiddenAt",(function(t){return!!t})),canReply:i.Z.attribute("canReply"),canRename:i.Z.attribute("canRename"),canHide:i.Z.attribute("canHide"),canDelete:i.Z.attribute("canDelete"),removePost:function(t){var e=this.data.relationships,n=e&&e.posts;n&&n.data.some((function(e,r){if(t===e.id)return n.data.splice(r,1),!0}))},unreadCount:function(){var t=app.session.user;if(t&&t.markedAllAsReadAt()<this.lastPostedAt()){var e=Math.max(0,this.lastPostNumber()-(this.lastReadPostNumber()||0));return Math.min(e,this.commentCount())}return 0},badges:function(){var t=new o.Z;return this.isHidden()&&t.add("hidden",m(u.Z,{type:"hidden",icon:"fas fa-trash",label:app.translator.trans("core.lib.badge.hidden_tooltip")})),t},postIds:function(){var t=this.data.relationships.posts;return t?t.data.map((function(t){return t.id})):[]}}),window.flreg.add("models/Discussion",c)},4032:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(2122),a=n(1788),i=n(2743),s=function(t){function e(){return t.apply(this,arguments)||this}return(0,a.Z)(e,t),e}(i.Z);(0,r.Z)(s.prototype,{nameSingular:i.Z.attribute("nameSingular"),namePlural:i.Z.attribute("namePlural"),color:i.Z.attribute("color"),icon:i.Z.attribute("icon"),isHidden:i.Z.attribute("isHidden")}),s.ADMINISTRATOR_ID="1",s.GUEST_ID="2",s.MEMBER_ID="3";const o=s;window.flreg.add("models/Group",s)},2231:(t,e,n)=>{n.d(e,{Z:()=>u});var r=n(7757),a=n.n(r),i=n(2137),s=n(2122),o=n(6156),u=function(){function t(t,e){(0,o.Z)(this,"component",void 0),(0,o.Z)(this,"routeName",void 0),this.component=t,this.routeName=e}var e=t.prototype;return e.makeKey=function(){return this.routeName+JSON.stringify(m.route.param())},e.makeAttrs=function(t){return(0,s.Z)({},t.attrs,{routeName:this.routeName})},e.onmatch=function(){var t=(0,i.Z)(a().mark((function t(e,n,r){var i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!=typeof this.component.component){t.next=4;break}return t.abrupt("return",this.component);case 4:return t.next=6,this.component();case 6:return i=t.sent,t.abrupt("return",i.default);case 8:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}(),e.render=function(t){return[(0,s.Z)({},t,{attrs:this.makeAttrs(t),key:this.makeKey()})]},t}();window.flreg.add("resolvers/DefaultResolver",u)},8422:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(3482),a=function(){function t(t,e){void 0===e&&(e={}),this.type=t,this.data=e}var e=t.prototype;return e.matches=function(t,e){var n=this;return void 0===e&&(e={}),!!(0,r.Z)(this.type,t)&&Object.keys(e).every((function(t){return n.data[t]===e[t]}))},e.get=function(t){return this.data[t]},e.set=function(t,e){this.data[t]=e},t}();window.flreg.add("states/PageState",a)},4594:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(6156),a=function(t,e){(0,r.Z)(this,"content",void 0),(0,r.Z)(this,"priority",void 0),(0,r.Z)(this,"key",void 0),this.content=t,this.priority=e},i=function(){function t(){(0,r.Z)(this,"items",{})}var e=t.prototype;return e.isEmpty=function(){for(var t in this.items)if(this.items.hasOwnProperty(t))return!1;return!0},e.has=function(t){return!!this.items[t]},e.get=function(t){return this.items[t].content},e.add=function(t,e,n){return void 0===n&&(n=0),this.items[t]=new a(e,n),this},e.replace=function(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=null),this.items[t]&&(null!==e&&(this.items[t].content=e),null!==n&&(this.items[t].priority=n)),this},e.remove=function(t){return delete this.items[t],this},e.merge=function(t){for(var e in t.items)t.items.hasOwnProperty(e)&&t.items[e]instanceof a&&(this.items[e]=t.items[e]);return this},e.toArray=function(){var t=[];for(var e in this.items)this.items.hasOwnProperty(e)&&this.items[e]instanceof a&&(this.items[e].content=Object(this.items[e].content),this.items[e].content.itemName=e,t.push(this.items[e]),this.items[e].key=t.length);return t.sort((function(t,e){return t.priority===e.priority?t.key-e.key:t.priority>e.priority?-1:1})).map((function(t){return t.content}))},t}();window.flreg.add("utils/ItemList",i)},8e3:(t,e,n)=>{n.d(e,{Z:()=>a});var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},a=function(){function t(t){this.callback=t,this.ticking=!1}var e=t.prototype;return e.loop=function(){var t=this;this.ticking||(r((function(){t.update(),t.ticking=!1})),this.ticking=!0)},e.update=function(){this.callback(window.pageYOffset)},e.start=function(){this.active||window.addEventListener("scroll",this.active=this.loop.bind(this),{passive:!0})},e.stop=function(){window.removeEventListener("scroll",this.active),this.active=null},t}();window.flreg.add("utils/ScrollListener",a)},1024:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(5922),a=n.n(r);const i=a();window.flreg.add("utils/Stream",a())},1650:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(6010).Z;const a=r;window.flreg.add("utils/classList",r)},8529:(t,e,n)=>{function r(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,a=e.slice(0,-1),i=e.slice(-1)[0],s={};return function(){var t=this,e=!1;return a.forEach((function(n){var r="function"==typeof t[n]?t[n]():t[n];s[n]!==r&&(e=!0,s[n]=r)})),e&&(r=i.apply(this,a.map((function(t){return s[t]})))),r}}n.d(e,{Z:()=>r}),window.flreg.add("utils/computed",r)},1555:(t,e,n)=>{function r(t,e){var n=t[e];return delete t[e],n}n.d(e,{Z:()=>r}),window.flreg.add("utils/extract",r)},5731:(t,e,n)=>{function r(t){return t instanceof Array?t.map((function(t){return r(t)})).join(""):"object"==typeof t&&null!==t?t.children?r(t.children):t.text:t}n.d(e,{Z:()=>r}),window.flreg.add("utils/extractText",r)},9052:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(7484),a=n.n(r);n(4110);function i(t){var e=a()(t),n=a()();e.isAfter(n)&&(e=n);return e.diff(a()())<-2592e6?e.year()===a()().year()?e.format("D MMM"):e.format("ll"):e.fromNow()}window.flreg.add("utils/humanTime",i)},3482:(t,e,n)=>{function r(t,e){return t&&(t===e||t.prototype instanceof e)}n.d(e,{Z:()=>r}),window.flreg.add("utils/subclassOf",r)},1017:(t,e,n)=>{function r(t,e){return function(){e(this.getAttribute(t)||this[t])}}n.d(e,{Z:()=>r}),window.flreg.add("utils/withAttr",r)}}]);
//# sourceMappingURL=common.js.map